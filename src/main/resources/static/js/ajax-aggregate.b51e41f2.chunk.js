"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[898],{3620:(t,e,n)=>{n.d(e,{R:()=>s,z:()=>i});var r=[];function i(t){if(0===r.length)return!0;if(void 0===t.hostname)return!1;for(var e=0;e<r.length;e++){var n=r[e];if("*"===n.hostname)return!1;if(o(n.hostname,t.hostname)&&a(n.pathname,t.pathname))return!1}return!0}function s(t){if(r=[],t&&t.length)for(var e=0;e<t.length;e++){let n=t[e];if(!n)continue;0===n.indexOf("http://")?n=n.substring(7):0===n.indexOf("https://")&&(n=n.substring(8));const i=n.indexOf("/");let s,o;i>0?(s=n.substring(0,i),o=n.substring(i)):(s=n,o="");let[a]=s.split(":");r.push({hostname:a,pathname:o})}}function o(t,e){return!(t.length>e.length)&&e.indexOf(t)===e.length-t.length}function a(t,e){return 0===t.indexOf("/")&&(t=t.substring(1)),0===e.indexOf("/")&&(e=e.substring(1)),""===t||t===e}},7661:(t,e,n)=>{n.d(e,{o:()=>h});var r=n(3197),i=n(3114),s=n(2041),o=n(8464),a=n(2162);class h extends i.w{constructor(t,e,n){var r;super(n),this.endpoint=t,this.opts=e||{},this.started=!1,this.timeoutHandle=null,this.aborted=!1,this.harvest=new s.M(this.sharedContext),(0,o.L)(this.unload.bind(this)),null===(r=this.sharedContext)||void 0===r||r.ee.on(a.wO.RESET,(()=>this.runHarvest({forceNoRetry:!0})))}unload(){this.aborted||(this.opts.onUnload&&this.opts.onUnload(),this.runHarvest({unload:!0}))}startTimer(t,e){this.interval=t,this.started=!0,this.scheduleHarvest(null!=e?e:this.interval)}stopTimer(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.aborted=t,this.started=!1,this.timeoutHandle&&clearTimeout(this.timeoutHandle)}scheduleHarvest(t,e){this.timeoutHandle||(null==t&&(t=this.interval),this.timeoutHandle=setTimeout((()=>{this.timeoutHandle=null,this.runHarvest(e)}),1e3*t))}runHarvest(t){if(this.aborted)return;const e=e=>{null!==t&&void 0!==t&&t.forceNoRetry&&(e.retry=!1),this.onHarvestFinished(t,e)};let n,i,s=[];if(this.opts.getPayload){if(n=r.qD({isFinalHarvest:null===t||void 0===t?void 0:t.unload}),!n)return!1;const e=!(null!==t&&void 0!==t&&t.unload)&&n===r.Be;if(i=this.opts.getPayload({retry:e}),!i)return void(this.started&&this.scheduleHarvest());i="[object Array]"===Object.prototype.toString.call(i)?i:[i],s.push(...i)}let o=t=>this.harvest.sendX(t);s.length?o=this.opts.raw?t=>this.harvest._send(t):t=>this.harvest.send(t):s.push(void 0),s.forEach((r=>{o({endpoint:this.endpoint,payload:r,opts:t,submitMethod:n,cbFinished:e,customUrl:this.opts.customUrl,raw:this.opts.raw})})),this.started&&this.scheduleHarvest()}onHarvestFinished(t,e){if(this.opts.onFinished&&this.opts.onFinished(e),e.sent&&e.retry){const n=e.delay||this.opts.retryDelay;this.started&&n?(clearTimeout(this.timeoutHandle),this.timeoutHandle=null,this.scheduleHarvest(n,t)):!this.started&&n&&this.scheduleHarvest(n,t)}}}},6313:(t,e,n)=>{n.d(e,{AG:()=>h,FX:()=>d,n1:()=>l,uR:()=>u});var r=n(3973),i=n(8038),s=n(4355),o=Object.prototype.hasOwnProperty,a=64;function h(t,e,n){return t||0===t||""===t?e(t)+(n?",":""):"!"}function u(t,e){return e?Math.floor(t).toString(36):void 0===t||0===t?"":Math.floor(t).toString(36)}function d(t){var e=Object.hasOwnProperty("create")?Object.create(null):{},n=0;return function(r){if("undefined"===typeof r||""===r)return"";var i=new s.RR({agentIdentifier:t});r=String(r),i.shouldObfuscate()&&(r=i.obfuscateString(r));return o.call(e,r)?u(e[r],!0):(e[r]=n++,function(t){return"'"+t.replace(c,"\\$1")}(r))}}function l(t,e){var n=[];return(0,r.D)(t,(function(t,r){if(!(n.length>=a)){var s,o=5;switch(t=e(t),typeof r){case"object":r?s=e((0,i.P)(r)):o=9;break;case"number":o=6,s=r%1?r:r+".";break;case"boolean":o=r?7:8;break;case"undefined":o=9;break;default:s=e(r)}n.push([o,t+(s?","+s:"")])}})),n}var c=/([,\\;])/g},8464:(t,e,n)=>{n.d(e,{L:()=>o});var r=n(1997),i=n(3980),s=n(536);if(i.v6){i._A.cleanupTasks=[];const t=i._A.close;i._A.close=()=>{for(let t of i._A.cleanupTasks)t();t()}}function o(t){i.il?((0,s.N)(t,!0),(0,r.bP)("pagehide",t)):i.v6&&i._A.cleanupTasks.push(t)}},6193:(t,e,n)=>{n.r(e),n.d(e,{Aggregate:()=>b});var r=n(4572),i=n(4613),s=n(8038),o=n(6313),a=n(5894),h=n(8958),u=n(7661),d=n(3620),l=n(1458),c=n(9025),p=n(6477),f=n(1527);function v(){let{body:t,query:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t||e)try{const n=function(t){if(!t)return;Array.isArray(t)||(t=[t]);const e=[],n=[];for(let r of t){const t=g(r);t&&(e.push(t.operationName),n.push(t.operationType))}if(!n.length)return;return{operationName:e.join(","),operationType:n.join(","),operationFramework:"GraphQL"}}(m(t));if(n)return n;const r=g(function(t){if(!t||"string"!==typeof t)return;const e=new URLSearchParams(t);return m(Object.fromEntries(e))}(e));if(r)return r}catch(n){}}function g(t){if("object"!==typeof t||!t.query||"string"!==typeof t.query)return;const e=t.query.trim().match(/^(query|mutation|subscription)\s?(\w*)/),n=null===e||void 0===e?void 0:e[1];if(!n)return;return{operationName:t.operationName||(null===e||void 0===e?void 0:e[2])||"Anonymous",operationType:n,operationFramework:"GraphQL"}}function m(t){let e;if(!t||"string"!==typeof t&&"object"!==typeof t)return;if(e="string"===typeof t?JSON.parse(t):t,(null===(n=e)||void 0===n?void 0:n.constructor)!=={}.constructor&&!Array.isArray(e))return;var n;let r=!1;return r=Array.isArray(e)?e.some((t=>y(t))):y(e),r?e:void 0}function y(t){return!("object"!==typeof t||!t.query||"string"!==typeof t.query)}class b extends f.m{constructor(t,e){super(t,e,l.t);const n=(0,h.P_)(t),r=!1!==n.ajax.enabled;if((0,i.X)("xhr",H,this.featureName,this.ee),!r)return void this.drain();const f=(0,h.OP)(t).denyList;(0,d.R)(f);let g=[],m={},y=[];const b=this.ee,x=n.ajax.harvestTimeSeconds||10,S=n.ajax.maxPayloadSize||1e6;this.storeXhr=H,this.prepareHarvest=w,this.getStoredEvents=function(){return{ajaxEvents:g,spaAjaxEvents:m}},b.on("interactionSaved",(t=>{m[t.id]&&delete m[t.id]})),b.on("interactionDiscarded",(t=>{m[t.id]&&(m[t.id].forEach((function(t){g.push(t)})),delete m[t.id])}));const A=new u.o("events",{onFinished:function(t){t.retry&&y.length>0&&(g.unshift(...y),y=[])},getPayload:w},this);b.on("drain-".concat(this.featureName),(()=>{A.startTimer(x)})),this.drain();const j=(0,h.C5)(t).errorBeacon,T=n.proxy.beacon;function H(t,n,i,o,h){var u,l;if(n.time=i,l=t.cat?(0,s.P)([t.status,t.cat]):(0,s.P)([t.status,t.host,t.pathname]),e.store("xhr",l,t,n),r)if((0,d.z)(t)){(0,a.p)("bstXhrAgg",["xhr",l,t,n],void 0,c.D.sessionTrace,b);var f=this,y={method:t.method,status:t.status,domain:t.host,path:t.pathname,requestSize:n.txSize,responseSize:n.rxSize,type:h,startTime:i,endTime:o,callbackDuration:n.cbTime};if(f.dt&&(y.spanId=f.dt.spanId,y.traceId=f.dt.traceId,y.spanTimestamp=f.dt.timestamp),y.gql=t.gql=v({body:this.body,query:null===this||void 0===this||null===(u=this.parsedOrigin)||void 0===u?void 0:u.search}),y.gql&&(0,a.p)(p.xS,["Ajax/Events/GraphQL/Bytes-Added",(0,s.P)(y.gql).length],void 0,c.D.metrics,b),this.spaNode){var x=this.spaNode.interaction.id;m[x]=m[x]||[],m[x].push(y)}else g.push(y)}else t.hostname===j||T&&t.hostname===T?(0,a.p)(p.xS,["Ajax/Events/Excluded/Agent"],void 0,c.D.metrics,b):(0,a.p)(p.xS,["Ajax/Events/Excluded/App"],void 0,c.D.metrics,b)}function w(t){if(t=t||{},0===g.length)return null;for(var e=O(g,t.maxPayloadSize||S),n=[],r=0;r<e.length;r++)n.push({body:{e:e[r]}});return t.retry&&(y=g.slice()),g=[],n}function O(t,e,n){n=n||1;for(var r=[],i=function(t,e){e=e||t.length;for(var n=[],r=0,i=t.length;r<i;r+=e)n.push(new R(t.slice(r,r+e)));return n}(t,t.length/n),s=!1,o=0;o<i.length;o++){var a=i[o];if(a.tooBig(e)){if(1!==a.events.length){s=!0;break}}else r.push(a.payload)}return s?O(t,e,++n):r}function R(e){this.addString=(0,o.FX)(t),this.events=e,this.payload="bel.7;";for(var n=0;n<e.length;n++){var r=e[n],i=[(0,o.uR)(r.startTime),(0,o.uR)(r.endTime-r.startTime),(0,o.uR)(0),(0,o.uR)(0),this.addString(r.method),(0,o.uR)(r.status),this.addString(r.domain),this.addString(r.path),(0,o.uR)(r.requestSize),(0,o.uR)(r.responseSize),"fetch"===r.type?1:"",this.addString(0),(0,o.AG)(r.spanId,this.addString,!0)+(0,o.AG)(r.traceId,this.addString,!0)+(0,o.AG)(r.spanTimestamp,o.uR,!1)],s="2,",a=(0,o.n1)({...(0,h.C5)(t).jsAttributes||{},...r.gql||{}},this.addString);i.unshift((0,o.uR)(a.length)),s+=i.join(","),a&&a.length>0&&(s+=";"+a.join(";")),n+1<e.length&&(s+=";"),this.payload+=s}this.tooBig=function(t){return t=t||S,2*this.payload.length>t}}}}(0,r.Z)(b,"featureName",l.t)}}]);
//# sourceMappingURL=ajax-aggregate.b51e41f2.chunk.js.map