/*! For license information please see recorder.0f38adda.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[538],{8198:(e,t,n)=>{n.d(t,{Recorder:()=>kt});var r,o=n(2346),s=n(3092),i=n(6033);function a(e){return e.nodeType===e.ELEMENT_NODE}function l(e){var t=null===e||void 0===e?void 0:e.host;return Boolean((null===t||void 0===t?void 0:t.shadowRoot)===e)}function c(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function d(e){try{var t=e.rules||e.cssRules;return t?((n=Array.from(t).map(u).join("")).includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),n):null}catch(r){return null}var n}function u(e){var t;if(function(e){return"styleSheet"in e}(e))try{t=d(e.styleSheet)||function(e){var t=e.cssText;if(t.split('"').length<3)return t;var n=["@import","url(".concat(JSON.stringify(e.href),")")];return""===e.layerName?n.push("layer"):e.layerName&&n.push("layer(".concat(e.layerName,")")),e.supportsText&&n.push("supports(".concat(e.supportsText,")")),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(n){}return function(e){if(e.includes(":")){var t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}return e}(t||e.cssText)}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(r||(r={}));var h=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(e){var t;if(!e)return-1;var n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!==n&&void 0!==n?n:-1},e.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},e.prototype.removeNodeFromMap=function(e){var t=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},e.prototype.has=function(e){return this.idNodeMap.has(e)},e.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},e.prototype.add=function(e,t){var n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)},e.prototype.replace=function(e,t){var n=this.getNode(e);if(n){var r=this.nodeMetaMap.get(n);r&&this.nodeMetaMap.set(t,r)}this.idNodeMap.set(e,t)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function p(e){var t=e.element,n=e.maskInputOptions,r=e.tagName,o=e.type,s=e.value,i=e.maskInputFn,a=s||"",l=o&&g(o);return(n[r.toLowerCase()]||l&&n[l])&&(a=i?i(a,t):"*".repeat(a.length)),a}function g(e){return e.toLowerCase()}var m="__rrweb_original__";function I(e){var t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?g(t):null}var f,C,y=1,S=new RegExp("[^a-z0-9-_:]"),v=-2;function b(){return y++}var A=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,w=/^(?:[a-z+]+:)?\/\//i,k=/^www\..*/i,M=/^(data:)([^,]*),(.*)/i;function T(e,t){return(e||"").replace(A,(function(e,n,r,o,s,i){var a,l=r||s||i,c=n||o||"";if(!l)return e;if(w.test(l)||k.test(l))return"url(".concat(c).concat(l).concat(c,")");if(M.test(l))return"url(".concat(c).concat(l).concat(c,")");if("/"===l[0])return"url(".concat(c).concat((a=t,(a.indexOf("//")>-1?a.split("/").slice(0,3).join("/"):a.split("/")[0]).split("?")[0]+l)).concat(c,")");var d=t.split("/"),u=l.split("/");d.pop();for(var h=0,p=u;h<p.length;h++){var g=p[h];"."!==g&&(".."===g?d.pop():d.push(g))}return"url(".concat(c).concat(d.join("/")).concat(c,")")}))}var R=/^[^ \t\n\r\u000c]+/,N=/^[, \t\n\r\u000c]+/;function E(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function O(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function F(){var e=document.createElement("a");return e.href="",e.href}function x(e,t,n,r){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?E(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;var n=0;function r(e){var r,o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}for(var o=[];r(N),!(n>=t.length);){var s=r(R);if(","===s.slice(-1))s=E(e,s.substring(0,s.length-1)),o.push(s);else{var i="";s=E(e,s);for(var a=!1;;){var l=t.charAt(n);if(""===l){o.push((s+i).trim());break}if(a)")"===l&&(a=!1);else{if(","===l){n+=1,o.push((s+i).trim());break}"("===l&&(a=!0)}i+=l,n+=1}}}return o.join(", ")}(e,r):"style"===n?T(r,F()):"object"===t&&"data"===n?E(e,r):r:E(e,r):r}function Z(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function D(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!n&&D(e.parentNode,t,n);for(var r=e.classList.length;r--;){var o=e.classList[r];if(t.test(o))return!0}return!!n&&D(e.parentNode,t,n)}function L(e,t,n){try{var r=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===r)return!1;if("string"===typeof t){if(r.classList.contains(t))return!0;if(r.closest(".".concat(t)))return!0}else if(D(r,t,!0))return!0;if(n){if(r.matches(n))return!0;if(r.closest(n))return!0}}catch(o){}return!1}function B(e,t){var n=t.doc,o=t.mirror,s=t.blockClass,i=t.blockSelector,a=t.maskTextClass,l=t.maskTextSelector,c=t.inlineStylesheet,u=t.maskInputOptions,h=void 0===u?{}:u,y=t.maskTextFn,v=t.maskInputFn,b=t.dataURLOptions,A=void 0===b?{}:b,w=t.inlineImages,k=t.recordCanvas,M=t.keepIframeSrcFn,R=t.newlyAddedElement,N=void 0!==R&&R,E=function(e,t){if(!t.hasNode(e))return;var n=t.getId(e);return 1===n?void 0:n}(n,o);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:r.Document,childNodes:[],compatMode:e.compatMode}:{type:r.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:r.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:E};case e.ELEMENT_NODE:return function(e,t){for(var n=t.doc,o=t.blockClass,s=t.blockSelector,i=t.inlineStylesheet,a=t.maskInputOptions,l=void 0===a?{}:a,c=t.maskInputFn,u=t.dataURLOptions,h=void 0===u?{}:u,y=t.inlineImages,v=t.recordCanvas,b=t.keepIframeSrcFn,A=t.newlyAddedElement,w=void 0!==A&&A,k=t.rootId,M=function(e,t,n){try{if("string"===typeof t){if(e.classList.contains(t))return!0}else for(var r=e.classList.length;r--;){var o=e.classList[r];if(t.test(o))return!0}if(n)return e.matches(n)}catch(s){}return!1}(e,o,s),R=function(e){if(e instanceof HTMLFormElement)return"form";var t=g(e.tagName);return S.test(t)?"div":t}(e),N={},E=e.attributes.length,D=0;D<E;D++){var L=e.attributes[D];Z(R,L.name,L.value)||(N[L.name]=x(n,R,g(L.name),L.value))}if("link"===R&&i){var B=Array.from(n.styleSheets).find((function(t){return t.href===e.href})),W=null;B&&(W=d(B)),W&&(delete N.rel,delete N.href,N._cssText=T(W,B.href))}if("style"===R&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){(W=d(e.sheet))&&(N._cssText=T(W,F()))}if("input"===R||"textarea"===R||"select"===R){var V=e.value,G=e.checked;if("radio"!==N.type&&"checkbox"!==N.type&&"submit"!==N.type&&"button"!==N.type&&V){var U=I(e);N.value=p({element:e,type:U,tagName:R,value:V,maskInputOptions:l,maskInputFn:c})}else G&&(N.checked=G)}"option"===R&&(e.selected&&!l.select?N.selected=!0:delete N.selected);if("canvas"===R&&v)if("2d"===e.__context)(function(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var r=0;r<e.height;r+=50){var o=t.getImageData,s=m in o?o[m]:o;if(new Uint32Array(s.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((function(e){return 0!==e})))return!1}return!0})(e)||(N.rr_dataURL=e.toDataURL(h.type,h.quality));else if(!("__context"in e)){var K=e.toDataURL(h.type,h.quality),Y=document.createElement("canvas");Y.width=e.width,Y.height=e.height,K!==Y.toDataURL(h.type,h.quality)&&(N.rr_dataURL=K)}if("img"===R&&y){f||(f=n.createElement("canvas"),C=f.getContext("2d"));var _=e,J=_.crossOrigin;_.crossOrigin="anonymous";var z=function(){_.removeEventListener("load",z);try{f.width=_.naturalWidth,f.height=_.naturalHeight,C.drawImage(_,0,0),N.rr_dataURL=f.toDataURL(h.type,h.quality)}catch(e){console.warn("Cannot inline img src=".concat(_.currentSrc,"! Error: ").concat(e))}J?N.crossOrigin=J:_.removeAttribute("crossorigin")};_.complete&&0!==_.naturalWidth?z():_.addEventListener("load",z)}"audio"!==R&&"video"!==R||(N.rr_mediaState=e.paused?"paused":"played",N.rr_mediaCurrentTime=e.currentTime);w||(e.scrollLeft&&(N.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(N.rr_scrollTop=e.scrollTop));if(M){var Q=e.getBoundingClientRect(),P=Q.width,H=Q.height;N={class:N.class,rr_width:"".concat(P,"px"),rr_height:"".concat(H,"px")}}"iframe"!==R||b(N.src)||(e.contentDocument||(N.rr_src=N.src),delete N.src);return{type:r.Element,tagName:R,attributes:N,childNodes:[],isSVG:O(e)||void 0,needBlock:M,rootId:k}}(e,{doc:n,blockClass:s,blockSelector:i,inlineStylesheet:c,maskInputOptions:h,maskInputFn:v,dataURLOptions:A,inlineImages:w,recordCanvas:k,keepIframeSrcFn:M,newlyAddedElement:N,rootId:E});case e.TEXT_NODE:return function(e,t){var n,o=t.maskTextClass,s=t.maskTextSelector,i=t.maskTextFn,a=t.rootId,l=e.parentNode&&e.parentNode.tagName,c=e.textContent,u="STYLE"===l||void 0,h="SCRIPT"===l||void 0;if(u&&c){try{e.nextSibling||e.previousSibling||(null===(n=e.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(c=d(e.parentNode.sheet))}catch(p){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(p),e)}c=T(c,F())}h&&(c="SCRIPT_PLACEHOLDER");!u&&!h&&c&&L(e,o,s)&&(c=i?i(c):c.replace(/[\S]/g,"*"));return{type:r.Text,textContent:c||"",isStyle:u,rootId:a}}(e,{maskTextClass:a,maskTextSelector:l,maskTextFn:y,rootId:E});case e.CDATA_SECTION_NODE:return{type:r.CDATA,textContent:"",rootId:E};case e.COMMENT_NODE:return{type:r.Comment,textContent:e.textContent||"",rootId:E};default:return!1}}function W(e){return void 0===e||null===e?"":e.toLowerCase()}function V(e,t){var n,o=t.doc,s=t.mirror,i=t.blockClass,d=t.blockSelector,u=t.maskTextClass,h=t.maskTextSelector,p=t.skipChild,g=void 0!==p&&p,m=t.inlineStylesheet,I=void 0===m||m,f=t.maskInputOptions,C=void 0===f?{}:f,y=t.maskTextFn,S=t.maskInputFn,A=t.slimDOMOptions,w=t.dataURLOptions,k=void 0===w?{}:w,M=t.inlineImages,T=void 0!==M&&M,R=t.recordCanvas,N=void 0!==R&&R,E=t.onSerialize,O=t.onIframeLoad,F=t.iframeLoadTimeout,x=void 0===F?5e3:F,Z=t.onStylesheetLoad,D=t.stylesheetLoadTimeout,L=void 0===D?5e3:D,G=t.keepIframeSrcFn,U=void 0===G?function(){return!1}:G,K=t.newlyAddedElement,Y=void 0!==K&&K,_=t.preserveWhiteSpace,J=void 0===_||_,z=B(e,{doc:o,mirror:s,blockClass:i,blockSelector:d,maskTextClass:u,maskTextSelector:h,inlineStylesheet:I,maskInputOptions:C,maskTextFn:y,maskInputFn:S,dataURLOptions:k,inlineImages:T,recordCanvas:N,keepIframeSrcFn:U,newlyAddedElement:Y});if(!z)return console.warn(e,"not serialized"),null;n=s.hasNode(e)?s.getId(e):!function(e,t){if(t.comment&&e.type===r.Comment)return!0;if(e.type===r.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"===typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(W(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===W(e.attributes.name)||"icon"===W(e.attributes.rel)||"apple-touch-icon"===W(e.attributes.rel)||"shortcut icon"===W(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&W(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(W(e.attributes.property).match(/^(og|twitter|fb):/)||W(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===W(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===W(e.attributes.name)||"googlebot"===W(e.attributes.name)||"bingbot"===W(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===W(e.attributes.name)||"generator"===W(e.attributes.name)||"framework"===W(e.attributes.name)||"publisher"===W(e.attributes.name)||"progid"===W(e.attributes.name)||W(e.attributes.property).match(/^article:/)||W(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===W(e.attributes.name)||"yandex-verification"===W(e.attributes.name)||"csrf-token"===W(e.attributes.name)||"p:domain_verify"===W(e.attributes.name)||"verify-v1"===W(e.attributes.name)||"verification"===W(e.attributes.name)||"shopify-checkout-api-token"===W(e.attributes.name)))return!0}}return!1}(z,A)&&(J||z.type!==r.Text||z.isStyle||z.textContent.replace(/^\s+|\s+$/gm,"").length)?b():v;var Q=Object.assign(z,{id:n});if(s.add(e,Q),n===v)return null;E&&E(e);var P=!g;if(Q.type===r.Element){P=P&&!Q.needBlock,delete Q.needBlock;var H=e.shadowRoot;H&&c(H)&&(Q.isShadowHost=!0)}if((Q.type===r.Document||Q.type===r.Element)&&P){A.headWhitespace&&Q.type===r.Element&&"head"===Q.tagName&&(J=!1);for(var j={doc:o,mirror:s,blockClass:i,blockSelector:d,maskTextClass:u,maskTextSelector:h,skipChild:g,inlineStylesheet:I,maskInputOptions:C,maskTextFn:y,maskInputFn:S,slimDOMOptions:A,dataURLOptions:k,inlineImages:T,recordCanvas:N,preserveWhiteSpace:J,onSerialize:E,onIframeLoad:O,iframeLoadTimeout:x,onStylesheetLoad:Z,stylesheetLoadTimeout:L,keepIframeSrcFn:U},X=0,q=Array.from(e.childNodes);X<q.length;X++){(te=V(q[X],j))&&Q.childNodes.push(te)}if(a(e)&&e.shadowRoot)for(var $=0,ee=Array.from(e.shadowRoot.childNodes);$<ee.length;$++){var te;(te=V(ee[$],j))&&(c(e.shadowRoot)&&(te.isShadow=!0),Q.childNodes.push(te))}}return e.parentNode&&l(e.parentNode)&&c(e.parentNode)&&(Q.isShadow=!0),Q.type===r.Element&&"iframe"===Q.tagName&&function(e,t,n){var r=e.contentWindow;if(r){var o,s=!1;try{o=r.document.readyState}catch(l){return}if("complete"===o){var i="about:blank";if(r.location.href!==i||e.src===i||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}else{var a=setTimeout((function(){s||(t(),s=!0)}),n);e.addEventListener("load",(function(){clearTimeout(a),s=!0,t()}))}}}(e,(function(){var t=e.contentDocument;if(t&&O){var n=V(t,{doc:t,mirror:s,blockClass:i,blockSelector:d,maskTextClass:u,maskTextSelector:h,skipChild:!1,inlineStylesheet:I,maskInputOptions:C,maskTextFn:y,maskInputFn:S,slimDOMOptions:A,dataURLOptions:k,inlineImages:T,recordCanvas:N,preserveWhiteSpace:J,onSerialize:E,onIframeLoad:O,iframeLoadTimeout:x,onStylesheetLoad:Z,stylesheetLoadTimeout:L,keepIframeSrcFn:U});n&&O(e,n)}}),x),Q.type===r.Element&&"link"===Q.tagName&&"stylesheet"===Q.attributes.rel&&function(e,t,n){var r,o=!1;try{r=e.sheet}catch(i){return}if(!r){var s=setTimeout((function(){o||(t(),o=!0)}),n);e.addEventListener("load",(function(){clearTimeout(s),o=!0,t()}))}}(e,(function(){if(Z){var t=V(e,{doc:o,mirror:s,blockClass:i,blockSelector:d,maskTextClass:u,maskTextSelector:h,skipChild:!1,inlineStylesheet:I,maskInputOptions:C,maskTextFn:y,maskInputFn:S,slimDOMOptions:A,dataURLOptions:k,inlineImages:T,recordCanvas:N,preserveWhiteSpace:J,onSerialize:E,onIframeLoad:O,iframeLoadTimeout:x,onStylesheetLoad:Z,stylesheetLoadTimeout:L,keepIframeSrcFn:U});t&&Z(e,t)}}),L),Q}var G=/([^\\]):hover/;new RegExp(G.source,"g");function U(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const K="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Y={map:{},getId:()=>(console.error(K),-1),getNode:()=>(console.error(K),null),removeNodeFromMap(){console.error(K)},has:()=>(console.error(K),!1),reset(){console.error(K)}};function _(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null,o=0;return function(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];const l=Date.now();o||!1!==n.leading||(o=l);const c=t-(l-o),d=this;c<=0||c>t?(r&&(clearTimeout(r),r=null),o=l,e.apply(d,i)):r||!1===n.trailing||(r=setTimeout((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(d,i)}),c))}}function J(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window;const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){setTimeout((()=>{n.set.call(this,e)}),0),s&&s.set&&s.set.call(this,e)}}),()=>J(e,t,s||{},!0)}function z(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"===typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(r){return()=>{}}}"undefined"!==typeof window&&window.Proxy&&window.Reflect&&(Y=new Proxy(Y,{get:(e,t,n)=>("map"===t&&console.error(K),Reflect.get(e,t,n))}));let Q=Date.now;function P(e){var t,n,r,o,s,i;const a=e.document;return{left:a.scrollingElement?a.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:(null===a||void 0===a?void 0:a.documentElement.scrollLeft)||(null===(n=null===(t=null===a||void 0===a?void 0:a.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===(r=null===a||void 0===a?void 0:a.body)||void 0===r?void 0:r.scrollLeft)||0,top:a.scrollingElement?a.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null===a||void 0===a?void 0:a.documentElement.scrollTop)||(null===(s=null===(o=null===a||void 0===a?void 0:a.body)||void 0===o?void 0:o.parentElement)||void 0===s?void 0:s.scrollTop)||(null===(i=null===a||void 0===a?void 0:a.body)||void 0===i?void 0:i.scrollTop)||0}}function H(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function j(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function X(e,t,n,r){if(!e)return!1;const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!o)return!1;try{if("string"===typeof t){if(o.classList.contains(t))return!0;if(r&&null!==o.closest("."+t))return!0}else if(D(o,t,r))return!0}catch(s){}if(n){if(o.matches(n))return!0;if(r&&null!==o.closest(n))return!0}return!1}function q(e,t){return t.getId(e)===v}function $(e,t){if(l(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||$(e.parentNode,t))}function ee(e){return Boolean(e.changedTouches)}function te(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function ne(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function re(e){return Boolean(null===e||void 0===e?void 0:e.shadowRoot)}/[1-9][0-9]{12}/.test(Date.now().toString())||(Q=()=>(new Date).getTime());class oe{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var t;return null!==(t=this.styleIDMap.get(e))&&void 0!==t?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function se(e){var t,n;let r=null;return(null===(n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))||void 0===n?void 0:n.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(r=e.getRootNode().host),r}function ie(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=se(n);)n=t;return n}(e);return t.contains(n)}function ae(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||ie(e))}var le=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(le||{}),ce=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(ce||{}),de=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(de||{}),ue=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(ue||{}),he=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(he||{});function pe(e){return"__ln"in e}class ge{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=(null===t||void 0===t?void 0:t.next)||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&pe(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&pe(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const me=(e,t)=>"".concat(e,"@").concat(t);class Ie{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new ge,r=e=>{let t=e,n=v;for(;n===v;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!ae(o))return;const s=l(o.parentNode)?this.mirror.getId(se(o)):this.mirror.getId(o.parentNode),i=r(o);if(-1===s||-1===i)return n.addNode(o);const a=V(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{te(e,this.mirror)&&this.iframeManager.addIframe(e),ne(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),re(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});a&&(e.push({parentId:s,nextId:i,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const a of this.movedSet)Ce(this.removes,a,this.mirror)&&!this.movedSet.has(a.parentNode)||o(a);for(const a of this.addedSet)Se(this.droppedSet,a)||Ce(this.removes,a,this.mirror)?Se(this.movedSet,a)?o(a):this.droppedSet.add(a):o(a);let s=null;for(;n.length;){let e=null;if(s){const t=this.mirror.getId(s.value.parentNode),n=r(s.value);-1!==t&&-1!==n&&(e=s)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}s=e.previous,n.removeNode(e.value),o(e.value)}const i={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"===typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(i.texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(i))},this.processMutation=e=>{if(q(e.target,this.mirror))return;let t;try{t=document.implementation.createHTMLDocument()}catch(n){t=this.doc}switch(e.type){case"characterData":{const t=e.target.textContent;X(e.target,this.blockClass,this.blockSelector,!1)||t===e.oldValue||this.texts.push({value:L(e.target,this.maskTextClass,this.maskTextSelector)&&t?this.maskTextFn?this.maskTextFn(t):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const n=e.target;let r=e.attributeName,o=e.target.getAttribute(r);if("value"===r){const e=I(n);o=p({element:n,maskInputOptions:this.maskInputOptions,tagName:n.tagName,type:e,value:o,maskInputFn:this.maskInputFn})}if(X(e.target,this.blockClass,this.blockSelector,!1)||o===e.oldValue)return;let s=this.attributes.find((t=>t.node===e.target));if("IFRAME"===n.tagName&&"src"===r&&!this.keepIframeSrcFn(o)){if(n.contentDocument)return;r="rr_src"}if(s||(s={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s)),"type"===r&&"INPUT"===n.tagName&&"password"===(e.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true"),!Z(n.tagName,r)&&(s.attributes[r]=x(this.doc,g(n.tagName),g(r),o),"style"===r)){const r=t.createElement("span");e.oldValue&&r.setAttribute("style",e.oldValue);for(const e of Array.from(n.style)){const t=n.style.getPropertyValue(e),o=n.style.getPropertyPriority(e);t!==r.style.getPropertyValue(e)||o!==r.style.getPropertyPriority(e)?s.styleDiff[e]=""===o?t:[t,o]:s._unchangedStyles[e]=[t,o]}for(const e of Array.from(r.style))""===n.style.getPropertyValue(e)&&(s.styleDiff[e]=!1)}break}case"childList":if(X(e.target,this.blockClass,this.blockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=l(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);X(e.target,this.blockClass,this.blockSelector,!1)||q(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(fe(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||$(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[me(n,r)]?fe(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!l(e.target)||!c(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(q(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[me(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);X(e,this.blockClass,this.blockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),re(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function fe(e,t){e.delete(t),t.childNodes.forEach((t=>fe(e,t)))}function Ce(e,t,n){return 0!==e.length&&ye(e,t,n)}function ye(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return!!e.some((e=>e.id===o))||ye(e,r,n)}function Se(e,t){return 0!==e.size&&ve(e,t)}function ve(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||ve(e,n))}let be;function Ae(e){be=e}function we(){be=void 0}const ke=e=>{if(!be)return e;return function(){try{return e(...arguments)}catch(t){if(be&&!0===be(t))return;throw t}}},Me=[];function Te(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(t){}return e&&e.target}function Re(e,t){var n,r;const o=new Ie;Me.push(o),o.init(e);let s=window.MutationObserver||window.__rrMutationObserver;const i=null===(r=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===r?void 0:r.call(n,"MutationObserver");i&&window[i]&&(s=window[i]);const a=new s(ke(o.processMutations.bind(o)));return a.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function Ne(e){let{mouseInteractionCb:t,doc:n,mirror:r,blockClass:o,blockSelector:s,sampling:i}=e;if(!1===i.mouseInteraction)return()=>{};const a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,l=[];let c=null;return Object.keys(de).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((e=>{let i=g(e);const a=(e=>n=>{const i=Te(n);if(X(i,o,s,!0))return;let a=null,l=e;if("pointerType"in n){switch(n.pointerType){case"mouse":a=ue.Mouse;break;case"touch":a=ue.Touch;break;case"pen":a=ue.Pen}a===ue.Touch?de[e]===de.MouseDown?l="TouchStart":de[e]===de.MouseUp&&(l="TouchEnd"):ue.Pen}else ee(n)&&(a=ue.Touch);null!==a?(c=a,(l.startsWith("Touch")&&a===ue.Touch||l.startsWith("Mouse")&&a===ue.Mouse)&&(a=null)):de[e]===de.Click&&(a=c,c=null);const d=ee(n)?n.changedTouches[0]:n;if(!d)return;const u=r.getId(i),{clientX:h,clientY:p}=d;ke(t)(Object.assign({type:de[l],id:u,x:h,y:p},null!==a&&{pointerType:a}))})(e);if(window.PointerEvent)switch(de[e]){case de.MouseDown:case de.MouseUp:i=i.replace("mouse","pointer");break;case de.TouchStart:case de.TouchEnd:return}l.push(U(i,a,n))})),ke((()=>{l.forEach((e=>e()))}))}function Ee(e){let{scrollCb:t,doc:n,mirror:r,blockClass:o,blockSelector:s,sampling:i}=e;return U("scroll",ke(_(ke((e=>{const i=Te(e);if(!i||X(i,o,s,!0))return;const a=r.getId(i);if(i===n&&n.defaultView){const e=P(n.defaultView);t({id:a,x:e.left,y:e.top})}else t({id:a,x:i.scrollLeft,y:i.scrollTop})})),i.scroll||100)),n)}function Oe(e,t){const n=Object.assign({},e);return t||delete n.userTriggered,n}const Fe=["INPUT","TEXTAREA","SELECT"],xe=new WeakMap;function Ze(e){return function(e,t){if(We("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||We("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||We("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||We("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function De(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Le(e,t){let{mirror:n,stylesheetManager:r}=e;var o,s,i;let a=null;a="#document"===t.nodeName?n.getId(t):n.getId(t.host);const l="#document"===t.nodeName?null===(o=t.defaultView)||void 0===o?void 0:o.Document:null===(i=null===(s=t.ownerDocument)||void 0===s?void 0:s.defaultView)||void 0===i?void 0:i.ShadowRoot,c=Object.getOwnPropertyDescriptor(null===l||void 0===l?void 0:l.prototype,"adoptedStyleSheets");return null!==a&&-1!==a&&l&&c?(Object.defineProperty(t,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get(){var e;return null===(e=c.get)||void 0===e?void 0:e.call(this)},set(e){var t;const n=null===(t=c.set)||void 0===t?void 0:t.call(this,e);if(null!==a&&-1!==a)try{r.adoptStyleSheets(e,a)}catch(o){}return n}}),ke((()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:c.get,set:c.set})}))):()=>{}}function Be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.doc.defaultView;if(!n)return()=>{};!function(e,t){const{mutationCb:n,mousemoveCb:r,mouseInteractionCb:o,scrollCb:s,viewportResizeCb:i,inputCb:a,mediaInteractionCb:l,styleSheetRuleCb:c,styleDeclarationCb:d,canvasMutationCb:u,fontCb:h,selectionCb:p}=e;e.mutationCb=function(){t.mutation&&t.mutation(...arguments),n(...arguments)},e.mousemoveCb=function(){t.mousemove&&t.mousemove(...arguments),r(...arguments)},e.mouseInteractionCb=function(){t.mouseInteraction&&t.mouseInteraction(...arguments),o(...arguments)},e.scrollCb=function(){t.scroll&&t.scroll(...arguments),s(...arguments)},e.viewportResizeCb=function(){t.viewportResize&&t.viewportResize(...arguments),i(...arguments)},e.inputCb=function(){t.input&&t.input(...arguments),a(...arguments)},e.mediaInteractionCb=function(){t.mediaInteaction&&t.mediaInteaction(...arguments),l(...arguments)},e.styleSheetRuleCb=function(){t.styleSheetRule&&t.styleSheetRule(...arguments),c(...arguments)},e.styleDeclarationCb=function(){t.styleDeclaration&&t.styleDeclaration(...arguments),d(...arguments)},e.canvasMutationCb=function(){t.canvasMutation&&t.canvasMutation(...arguments),u(...arguments)},e.fontCb=function(){t.font&&t.font(...arguments),h(...arguments)},e.selectionCb=function(){t.selection&&t.selection(...arguments),p(...arguments)}}(e,t);const r=Re(e,e.doc),o=function(e){let{mousemoveCb:t,sampling:n,doc:r,mirror:o}=e;if(!1===n.mousemove)return()=>{};const s="number"===typeof n.mousemove?n.mousemove:50,i="number"===typeof n.mousemoveCallback?n.mousemoveCallback:500;let a,l=[];const c=_(ke((e=>{const n=Date.now()-a;t(l.map((e=>(e.timeOffset-=n,e))),e),l=[],a=null})),i),d=ke(_(ke((e=>{const t=Te(e),{clientX:n,clientY:r}=ee(e)?e.changedTouches[0]:e;a||(a=Q()),l.push({x:n,y:r,id:o.getId(t),timeOffset:Q()-a}),c("undefined"!==typeof DragEvent&&e instanceof DragEvent?ce.Drag:e instanceof MouseEvent?ce.MouseMove:ce.TouchMove)})),s,{trailing:!1})),u=[U("mousemove",d,r),U("touchmove",d,r),U("drag",d,r)];return ke((()=>{u.forEach((e=>e()))}))}(e),s=Ne(e),i=Ee(e),a=function(e,t){let{viewportResizeCb:n}=e,{win:r}=t,o=-1,s=-1;return U("resize",ke(_(ke((()=>{const e=H(),t=j();o===e&&s===t||(n({width:Number(t),height:Number(e)}),o=e,s=t)})),200)),r)}(e,{win:n}),l=function(e){let{inputCb:t,doc:n,mirror:r,blockClass:o,blockSelector:s,ignoreClass:i,ignoreSelector:a,maskInputOptions:l,maskInputFn:c,sampling:d,userTriggeredOnInput:u}=e;function h(e){let t=Te(e);const r=e.isTrusted,d=t&&t.tagName;if(t&&"OPTION"===d&&(t=t.parentElement),!t||!d||Fe.indexOf(d)<0||X(t,o,s,!0))return;if(t.classList.contains(i)||a&&t.matches(a))return;let h=t.value,m=!1;const f=I(t)||"";"radio"===f||"checkbox"===f?m=t.checked:(l[d.toLowerCase()]||l[f])&&(h=p({element:t,maskInputOptions:l,tagName:d,type:f,value:h,maskInputFn:c})),g(t,ke(Oe)({text:h,isChecked:m,userTriggered:r},u));const C=t.name;"radio"===f&&C&&m&&n.querySelectorAll('input[type="radio"][name="'.concat(C,'"]')).forEach((e=>{e!==t&&g(e,ke(Oe)({text:e.value,isChecked:!m,userTriggered:!1},u))}))}function g(e,n){const o=xe.get(e);if(!o||o.text!==n.text||o.isChecked!==n.isChecked){xe.set(e,n);const o=r.getId(e);ke(t)(Object.assign(Object.assign({},n),{id:o}))}}const m=("last"===d.input?["change"]:["input","change"]).map((e=>U(e,ke(h),n))),f=n.defaultView;if(!f)return()=>{m.forEach((e=>e()))};const C=f.Object.getOwnPropertyDescriptor(f.HTMLInputElement.prototype,"value"),y=[[f.HTMLInputElement.prototype,"value"],[f.HTMLInputElement.prototype,"checked"],[f.HTMLSelectElement.prototype,"value"],[f.HTMLTextAreaElement.prototype,"value"],[f.HTMLSelectElement.prototype,"selectedIndex"],[f.HTMLOptionElement.prototype,"selected"]];return C&&C.set&&m.push(...y.map((e=>J(e[0],e[1],{set(){ke(h)({target:this,isTrusted:!1})}},!1,f)))),ke((()=>{m.forEach((e=>e()))}))}(e),c=function(e){let{mediaInteractionCb:t,blockClass:n,blockSelector:r,mirror:o,sampling:s,doc:i}=e;const a=ke((e=>_(ke((s=>{const i=Te(s);if(!i||X(i,n,r,!0))return;const{currentTime:a,volume:l,muted:c,playbackRate:d}=i;t({type:e,id:o.getId(i),currentTime:a,volume:l,muted:c,playbackRate:d})})),s.media||500))),l=[U("play",a(0),i),U("pause",a(1),i),U("seeked",a(2),i),U("volumechange",a(3),i),U("ratechange",a(4),i)];return ke((()=>{l.forEach((e=>e()))}))}(e),d=function(e,t){let{styleSheetRuleCb:n,mirror:r,stylesheetManager:o}=e,{win:s}=t;if(!s.CSSStyleSheet||!s.CSSStyleSheet.prototype)return()=>{};const i=s.CSSStyleSheet.prototype.insertRule;s.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:ke(((e,t,s)=>{const[i,a]=s,{id:l,styleId:c}=De(t,r,o.styleMirror);return(l&&-1!==l||c&&-1!==c)&&n({id:l,styleId:c,adds:[{rule:i,index:a}]}),e.apply(t,s)}))});const a=s.CSSStyleSheet.prototype.deleteRule;let l,c;s.CSSStyleSheet.prototype.deleteRule=new Proxy(a,{apply:ke(((e,t,s)=>{const[i]=s,{id:a,styleId:l}=De(t,r,o.styleMirror);return(a&&-1!==a||l&&-1!==l)&&n({id:a,styleId:l,removes:[{index:i}]}),e.apply(t,s)}))}),s.CSSStyleSheet.prototype.replace&&(l=s.CSSStyleSheet.prototype.replace,s.CSSStyleSheet.prototype.replace=new Proxy(l,{apply:ke(((e,t,s)=>{const[i]=s,{id:a,styleId:l}=De(t,r,o.styleMirror);return(a&&-1!==a||l&&-1!==l)&&n({id:a,styleId:l,replace:i}),e.apply(t,s)}))})),s.CSSStyleSheet.prototype.replaceSync&&(c=s.CSSStyleSheet.prototype.replaceSync,s.CSSStyleSheet.prototype.replaceSync=new Proxy(c,{apply:ke(((e,t,s)=>{const[i]=s,{id:a,styleId:l}=De(t,r,o.styleMirror);return(a&&-1!==a||l&&-1!==l)&&n({id:a,styleId:l,replaceSync:i}),e.apply(t,s)}))}));const d={};Ve("CSSGroupingRule")?d.CSSGroupingRule=s.CSSGroupingRule:(Ve("CSSMediaRule")&&(d.CSSMediaRule=s.CSSMediaRule),Ve("CSSConditionRule")&&(d.CSSConditionRule=s.CSSConditionRule),Ve("CSSSupportsRule")&&(d.CSSSupportsRule=s.CSSSupportsRule));const u={};return Object.entries(d).forEach((e=>{let[t,s]=e;u[t]={insertRule:s.prototype.insertRule,deleteRule:s.prototype.deleteRule},s.prototype.insertRule=new Proxy(u[t].insertRule,{apply:ke(((e,t,s)=>{const[i,a]=s,{id:l,styleId:c}=De(t.parentStyleSheet,r,o.styleMirror);return(l&&-1!==l||c&&-1!==c)&&n({id:l,styleId:c,adds:[{rule:i,index:[...Ze(t),a||0]}]}),e.apply(t,s)}))}),s.prototype.deleteRule=new Proxy(u[t].deleteRule,{apply:ke(((e,t,s)=>{const[i]=s,{id:a,styleId:l}=De(t.parentStyleSheet,r,o.styleMirror);return(a&&-1!==a||l&&-1!==l)&&n({id:a,styleId:l,removes:[{index:[...Ze(t),i]}]}),e.apply(t,s)}))})})),ke((()=>{s.CSSStyleSheet.prototype.insertRule=i,s.CSSStyleSheet.prototype.deleteRule=a,l&&(s.CSSStyleSheet.prototype.replace=l),c&&(s.CSSStyleSheet.prototype.replaceSync=c),Object.entries(d).forEach((e=>{let[t,n]=e;n.prototype.insertRule=u[t].insertRule,n.prototype.deleteRule=u[t].deleteRule}))}))}(e,{win:n}),u=Le(e,e.doc),h=function(e,t){let{styleDeclarationCb:n,mirror:r,ignoreCSSAttributes:o,stylesheetManager:s}=e,{win:i}=t;const a=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(a,{apply:ke(((e,t,i)=>{var l;const[c,d,u]=i;if(o.has(c))return a.apply(t,[c,d,u]);const{id:h,styleId:p}=De(null===(l=t.parentRule)||void 0===l?void 0:l.parentStyleSheet,r,s.styleMirror);return(h&&-1!==h||p&&-1!==p)&&n({id:h,styleId:p,set:{property:c,value:d,priority:u},index:Ze(t.parentRule)}),e.apply(t,i)}))});const l=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(l,{apply:ke(((e,t,i)=>{var a;const[c]=i;if(o.has(c))return l.apply(t,[c]);const{id:d,styleId:u}=De(null===(a=t.parentRule)||void 0===a?void 0:a.parentStyleSheet,r,s.styleMirror);return(d&&-1!==d||u&&-1!==u)&&n({id:d,styleId:u,remove:{property:c},index:Ze(t.parentRule)}),e.apply(t,i)}))}),ke((()=>{i.CSSStyleDeclaration.prototype.setProperty=a,i.CSSStyleDeclaration.prototype.removeProperty=l}))}(e,{win:n}),g=e.collectFonts?function(e){let{fontCb:t,doc:n}=e;const r=n.defaultView;if(!r)return()=>{};const o=[],s=new WeakMap,i=r.FontFace;r.FontFace=function(e,t,n){const r=new i(e,t,n);return s.set(r,{family:e,buffer:"string"!==typeof t,descriptors:n,fontSource:"string"===typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const a=z(n.fonts,"add",(function(e){return function(n){return setTimeout(ke((()=>{const e=s.get(n);e&&(t(e),s.delete(n))})),0),e.apply(this,[n])}}));return o.push((()=>{r.FontFace=i})),o.push(a),ke((()=>{o.forEach((e=>e()))}))}(e):()=>{},m=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,selectionCb:s}=e;let i=!0;const a=ke((()=>{const e=t.getSelection();if(!e||i&&(null===e||void 0===e?void 0:e.isCollapsed))return;i=e.isCollapsed||!1;const a=[],l=e.rangeCount||0;for(let t=0;t<l;t++){const s=e.getRangeAt(t),{startContainer:i,startOffset:l,endContainer:c,endOffset:d}=s;X(i,r,o,!0)||X(c,r,o,!0)||a.push({start:n.getId(i),startOffset:l,end:n.getId(c),endOffset:d})}s({ranges:a})}));return a(),U("selectionchange",a)}(e),f=[];for(const p of e.plugins)f.push(p.observer(p.callback,n,p.options));return ke((()=>{Me.forEach((e=>e.reset())),r.disconnect(),o(),s(),i(),a(),l(),c(),d(),u(),h(),g(),m(),f.forEach((e=>e()))}))}function We(e){return"undefined"!==typeof window[e]}function Ve(e){return Boolean("undefined"!==typeof window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Ge{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),s=r||this.getRemoteIdToIdMap(e);let i=o.get(t);return i||(i=this.generateIdFn(),o.set(t,i),s.set(i,t)),i}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!==typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class Ue{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Ge(b),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Ge(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){var n;switch(t.type){case le.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:le.IncrementalSnapshot,data:{source:ce.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case le.Meta:case le.Load:case le.DomContentLoaded:return!1;case le.Plugin:return t;case le.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case le.IncrementalSnapshot:switch(t.data.source){case ce.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case ce.Drag:case ce.TouchMove:case ce.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case ce.ViewportResize:return!1;case ce.MediaInteraction:case ce.MouseInteraction:case ce.Scroll:case ce.CanvasMutation:case ce.Input:return this.replaceIds(t.data,e,["id"]),t;case ce.StyleSheetRule:case ce.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case ce.Font:return t;case ce.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case ce.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null===(n=t.data.styles)||void 0===n||n.forEach((t=>{this.replaceStyleIds(t,e,["styleId"])})),t}}}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"===typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===r.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class Ke{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!c(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Re(Object.assign(Object.assign({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Ee(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Le({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(z(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&ae(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(t){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}function Ye(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((r=r.apply(e,t||[])).next())}))}for(var _e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Je="undefined"===typeof Uint8Array?[]:new Uint8Array(256),ze=0;ze<64;ze++)Je[_e.charCodeAt(ze)]=ze;const Qe=new Map;const Pe=(e,t,n)=>{if(!e||!Xe(e,t)&&"object"!==typeof e)return;const r=function(e,t){let n=Qe.get(e);return n||(n=new Map,Qe.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function He(e,t,n){if(e instanceof Array)return e.map((e=>He(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=_e[n[t]>>2],o+=_e[(3&n[t])<<4|n[t+1]>>4],o+=_e[(15&n[t+1])<<2|n[t+2]>>6],o+=_e[63&n[t+2]];return r%3===2?o=o.substring(0,o.length-1)+"=":r%3===1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[He(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[He(e.data,t,n),e.width,e.height]}}if(Xe(e,t)||"object"===typeof e){return{rr_type:e.constructor.name,index:Pe(e,t,n)}}return e}const je=(e,t,n)=>[...e].map((e=>He(e,t,n))),Xe=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"===typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function qe(e,t,n,r){const o=[];try{const s=z(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(o){for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];if(!X(this,t,n,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(o);if("__context"in this||(this.__context=e),r&&["webgl","webgl2"].includes(e))if(i[0]&&"object"===typeof i[0]){const e=i[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[o,...i])}}));o.push(s)}catch(s){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach((e=>e()))}}function $e(e,t,n,r,o,s,i){const a=[],l=Object.getOwnPropertyNames(e);for(const d of l)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if("function"!==typeof e[d])continue;const s=z(e,d,(function(e){return function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];const c=e.apply(this,a);if(Pe(c,i,this),"tagName"in this.canvas&&!X(this.canvas,r,o,!0)){const e=je([...a],i,this),r={type:t,property:d,args:e};n(this.canvas,r)}return c}}));a.push(s)}catch(c){const r=J(e,d,{set(e){n(this.canvas,{type:t,property:d,args:[e],setter:!0})}});a.push(r)}return a}function et(e,t,n){var r=void 0===t?null:t,o=function(e,t){var n=atob(e);if(t){for(var r=new Uint8Array(n.length),o=0,s=n.length;o<s;++o)r[o]=n.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}(e,void 0!==n&&n),s=o.indexOf("\n",10)+1,i=o.substring(s)+(r?"//# sourceMappingURL="+r:""),a=new Blob([i],{type:"application/javascript"});return URL.createObjectURL(a)}var tt=function(e,t,n){var r;return function(o){return r=r||et(e,t,n),new Worker(r,o)}}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",null,!1);class nt{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,recordCanvas:s,dataURLOptions:i}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,s&&"all"===t&&this.initCanvasMutationObserver(n,r,o),s&&"number"===typeof t&&this.initCanvasFPSObserver(t,n,r,o,{dataURLOptions:i})}initCanvasFPSObserver(e,t,n,r,o){const s=qe(t,n,r,!0),i=new Map,a=new tt;a.onmessage=e=>{const{id:t}=e.data;if(i.set(t,!1),!("base64"in e.data))return;const{base64:n,type:r,width:o,height:s}=e.data;this.mutationCb({id:t,type:he["2D"],commands:[{property:"clearRect",args:[0,0,o,s]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:n}],type:r}]},0,0]}]})};const l=1e3/e;let c,d=0;const u=e=>{d&&e-d<l||(d=e,(()=>{const e=[];return t.document.querySelectorAll("canvas").forEach((t=>{X(t,n,r,!0)||e.push(t)})),e})().forEach((e=>Ye(this,void 0,void 0,(function*(){var t;const n=this.mirror.getId(e);if(i.get(n))return;if(i.set(n,!0),["webgl","webgl2"].includes(e.__context)){const n=e.getContext(e.__context);!1===(null===(t=null===n||void 0===n?void 0:n.getContextAttributes())||void 0===t?void 0:t.preserveDrawingBuffer)&&n.clear(n.COLOR_BUFFER_BIT)}const r=yield createImageBitmap(e);a.postMessage({id:n,bitmap:r,width:e.width,height:e.height,dataURLOptions:o.dataURLOptions},[r])}))))),c=requestAnimationFrame(u)};c=requestAnimationFrame(u),this.resetObservers=()=>{s(),cancelAnimationFrame(c)}}initCanvasMutationObserver(e,t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const r=qe(e,t,n,!1),o=function(e,t,n,r){const o=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of s)try{if("function"!==typeof t.CanvasRenderingContext2D.prototype[a])continue;const s=z(t.CanvasRenderingContext2D.prototype,a,(function(o){return function(){for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];return X(this.canvas,n,r,!0)||setTimeout((()=>{const n=je([...i],t,this);e(this.canvas,{type:he["2D"],property:a,args:n})}),0),o.apply(this,i)}}));o.push(s)}catch(i){const n=J(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:he["2D"],property:a,args:[t],setter:!0})}});o.push(n)}return()=>{o.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n),s=function(e,t,n,r,o){const s=[];return s.push(...$e(t.WebGLRenderingContext.prototype,he.WebGL,e,n,r,0,t)),"undefined"!==typeof t.WebGL2RenderingContext&&s.push(...$e(t.WebGL2RenderingContext.prototype,he.WebGL2,e,n,r,0,t)),()=>{s.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,this.mirror);this.resetObservers=()=>{r(),o(),s()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["type"]);return t})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}class rt{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new oe,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const o of e){let e;if(this.styleMirror.has(o))e=this.styleMirror.getId(o);else{e=this.styleMirror.add(o);const t=Array.from(o.rules||CSSRule);r.push({styleId:e,rules:t.map(((e,t)=>({rule:u(e),index:t})))})}n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class ot{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function st(e){return Object.assign(Object.assign({},e),{timestamp:Q()})}let it,at,lt,ct=!1;const dt=new h;function ut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:s=null,ignoreClass:i="rr-ignore",ignoreSelector:a=null,maskTextClass:l="rr-mask",maskTextSelector:c=null,inlineStylesheet:d=!0,maskAllInputs:u,maskInputOptions:p,slimDOMOptions:g,maskInputFn:m,maskTextFn:I,hooks:f,packFn:C,sampling:y={},dataURLOptions:S={},mousemoveWait:v,recordCanvas:b=!1,recordCrossOriginIframes:A=!1,recordAfter:w=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:k=!1,collectFonts:M=!1,inlineImages:T=!1,plugins:R,keepIframeSrcFn:N=(()=>!1),ignoreCSSAttributes:E=new Set([]),errorHandler:O}=e;Ae(O);const F=!A||window.parent===window;let x=!1;if(!F)try{window.parent.document&&(x=!1)}catch(X){x=!0}if(F&&!t)throw new Error("emit function is required");void 0!==v&&void 0===y.mousemove&&(y.mousemove=v),dt.reset();const Z=!0===u?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==p?p:{password:!0},D=!0===g||"all"===g?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===g,headMetaDescKeywords:"all"===g}:g||{};let L;!function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let o=n[0];if(!(0 in n))throw new TypeError("1 argument is required");do{if(e===o)return!0}while(o=o&&o.parentNode);return!1})}();let B=0;const W=e=>{for(const t of R||[])t.eventProcessor&&(e=t.eventProcessor(e));return C&&!x&&(e=C(e)),e};it=(e,o)=>{var s;if(!(null===(s=Me[0])||void 0===s?void 0:s.isFrozen())||e.type===le.FullSnapshot||e.type===le.IncrementalSnapshot&&e.data.source===ce.Mutation||Me.forEach((e=>e.unfreeze())),F)null===t||void 0===t||t(W(e),o);else if(x){const t={type:"rrweb",event:W(e),origin:window.location.origin,isCheckout:o};window.parent.postMessage(t,"*")}if(e.type===le.FullSnapshot)L=e,B=0;else if(e.type===le.IncrementalSnapshot){if(e.data.source===ce.Mutation&&e.data.isAttachIframe)return;B++;const t=r&&B>=r,o=n&&e.timestamp-L.timestamp>n;(t||o)&&at(!0)}};const G=e=>{it(st({type:le.IncrementalSnapshot,data:Object.assign({source:ce.Mutation},e)}))},K=e=>it(st({type:le.IncrementalSnapshot,data:Object.assign({source:ce.Scroll},e)})),Y=e=>it(st({type:le.IncrementalSnapshot,data:Object.assign({source:ce.CanvasMutation},e)})),_=new rt({mutationCb:G,adoptedStyleSheetCb:e=>it(st({type:le.IncrementalSnapshot,data:Object.assign({source:ce.AdoptedStyleSheet},e)}))}),J=new Ue({mirror:dt,mutationCb:G,stylesheetManager:_,recordCrossOriginIframes:A,wrappedEmit:it});for(const h of R||[])h.getMirror&&h.getMirror({nodeMirror:dt,crossOriginIframeMirror:J.crossOriginIframeMirror,crossOriginIframeStyleMirror:J.crossOriginIframeStyleMirror});const z=new ot;lt=new nt({recordCanvas:b,mutationCb:Y,win:window,blockClass:o,blockSelector:s,mirror:dt,sampling:y.canvas,dataURLOptions:S});const Q=new Ke({mutationCb:G,scrollCb:K,bypassOptions:{blockClass:o,blockSelector:s,maskTextClass:l,maskTextSelector:c,inlineStylesheet:d,maskInputOptions:Z,dataURLOptions:S,maskTextFn:I,maskInputFn:m,recordCanvas:b,inlineImages:T,sampling:y,slimDOMOptions:D,iframeManager:J,stylesheetManager:_,canvasManager:lt,keepIframeSrcFn:N,processedNodeManager:z},mirror:dt});at=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];it(st({type:le.Meta,data:{href:window.location.href,width:j(),height:H()}}),e),_.reset(),Q.init(),Me.forEach((e=>e.lock()));const t=function(e,t){var n=t||{},r=n.mirror,o=void 0===r?new h:r,s=n.blockClass,i=void 0===s?"rr-block":s,a=n.blockSelector,l=void 0===a?null:a,c=n.maskTextClass,d=void 0===c?"rr-mask":c,u=n.maskTextSelector,p=void 0===u?null:u,g=n.inlineStylesheet,m=void 0===g||g,I=n.inlineImages,f=void 0!==I&&I,C=n.recordCanvas,y=void 0!==C&&C,S=n.maskAllInputs,v=void 0!==S&&S,b=n.maskTextFn,A=n.maskInputFn,w=n.slimDOM,k=void 0!==w&&w,M=n.dataURLOptions,T=n.preserveWhiteSpace,R=n.onSerialize,N=n.onIframeLoad,E=n.iframeLoadTimeout,O=n.onStylesheetLoad,F=n.stylesheetLoadTimeout,x=n.keepIframeSrcFn;return V(e,{doc:e,mirror:o,blockClass:i,blockSelector:l,maskTextClass:d,maskTextSelector:p,skipChild:!1,inlineStylesheet:m,maskInputOptions:!0===v?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===v?{password:!0}:v,maskTextFn:b,maskInputFn:A,slimDOMOptions:!0===k||"all"===k?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===k,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===k?{}:k,dataURLOptions:M,inlineImages:f,recordCanvas:y,preserveWhiteSpace:T,onSerialize:R,onIframeLoad:N,iframeLoadTimeout:E,onStylesheetLoad:O,stylesheetLoadTimeout:F,keepIframeSrcFn:void 0===x?function(){return!1}:x,newlyAddedElement:!1})}(document,{mirror:dt,blockClass:o,blockSelector:s,maskTextClass:l,maskTextSelector:c,inlineStylesheet:d,maskAllInputs:Z,maskTextFn:I,slimDOM:D,dataURLOptions:S,recordCanvas:b,inlineImages:T,onSerialize:e=>{te(e,dt)&&J.addIframe(e),ne(e,dt)&&_.trackLinkElement(e),re(e)&&Q.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{J.attachIframe(e,t),Q.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{_.attachLinkElement(e,t)},keepIframeSrcFn:N});if(!t)return console.warn("Failed to snapshot the document");it(st({type:le.FullSnapshot,data:{node:t,initialOffset:P(window)}}),e),Me.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&_.adoptStyleSheets(document.adoptedStyleSheets,dt.getId(document))};try{const e=[],t=e=>{var t;return ke(Be)({mutationCb:G,mousemoveCb:(e,t)=>it(st({type:le.IncrementalSnapshot,data:{source:t,positions:e}})),mouseInteractionCb:e=>it(st({type:le.IncrementalSnapshot,data:Object.assign({source:ce.MouseInteraction},e)})),scrollCb:K,viewportResizeCb:e=>it(st({type:le.IncrementalSnapshot,data:Object.assign({source:ce.ViewportResize},e)})),inputCb:e=>it(st({type:le.IncrementalSnapshot,data:Object.assign({source:ce.Input},e)})),mediaInteractionCb:e=>it(st({type:le.IncrementalSnapshot,data:Object.assign({source:ce.MediaInteraction},e)})),styleSheetRuleCb:e=>it(st({type:le.IncrementalSnapshot,data:Object.assign({source:ce.StyleSheetRule},e)})),styleDeclarationCb:e=>it(st({type:le.IncrementalSnapshot,data:Object.assign({source:ce.StyleDeclaration},e)})),canvasMutationCb:Y,fontCb:e=>it(st({type:le.IncrementalSnapshot,data:Object.assign({source:ce.Font},e)})),selectionCb:e=>{it(st({type:le.IncrementalSnapshot,data:Object.assign({source:ce.Selection},e)}))},blockClass:o,ignoreClass:i,ignoreSelector:a,maskTextClass:l,maskTextSelector:c,maskInputOptions:Z,inlineStylesheet:d,sampling:y,recordCanvas:b,inlineImages:T,userTriggeredOnInput:k,collectFonts:M,doc:e,maskInputFn:m,maskTextFn:I,keepIframeSrcFn:N,blockSelector:s,slimDOMOptions:D,dataURLOptions:S,mirror:dt,iframeManager:J,stylesheetManager:_,shadowDomManager:Q,processedNodeManager:z,canvasManager:lt,ignoreCSSAttributes:E,plugins:(null===(t=null===R||void 0===R?void 0:R.filter((e=>e.observer)))||void 0===t?void 0:t.map((e=>({observer:e.observer,options:e.options,callback:t=>it(st({type:le.Plugin,data:{plugin:e.name,payload:t}}))}))))||[]},f)};J.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(r){console.warn(r)}}));const n=()=>{at(),e.push(t(document)),ct=!0};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(U("DOMContentLoaded",(()=>{it(st({type:le.DomContentLoaded,data:{}})),"DOMContentLoaded"===w&&n()}))),e.push(U("load",(()=>{it(st({type:le.Load,data:{}})),"load"===w&&n()}),window))),()=>{e.forEach((e=>e())),z.destroy(),ct=!1,we()}}catch(q){console.warn(q)}}ut.addCustomEvent=(e,t)=>{if(!ct)throw new Error("please add custom event after start recording");it(st({type:le.Custom,data:{tag:e,payload:t}}))},ut.freezePage=()=>{Me.forEach((e=>e.freeze()))},ut.takeFullSnapshot=e=>{if(!ct)throw new Error("please take full snapshot after start recording");at(e)},ut.mirror=dt;var ht=n(8038),pt=n(1477),gt=n(8958);class mt{constructor(){this.events=[],this.cycleTimestamp=Date.now(),this.payloadBytesEstimation=0,this.hasSnapshot=!1,this.hasMeta=!1,this.hasError=!1,this.inlinedAllStylesheets=!0}add(e){this.events.push(e)}}var It=n(2162),ft=n(4939),Ct=n(5894),yt=n(6477),St=n(9025),vt=new WeakMap,bt=new WeakMap,At=new WeakMap,wt=new WeakMap;class kt{constructor(e){(0,o.Z)(this,vt,{writable:!0,value:new mt}),(0,o.Z)(this,bt,{writable:!0,value:new mt}),(0,o.Z)(this,At,{writable:!0,value:[new mt]}),(0,o.Z)(this,wt,{writable:!0,value:!1}),this.recording=!1,this.currentBufferTarget=(0,i.Z)(this,vt),this.lastMeta=!1,this.parent=e,this.shouldInlineStylesheets=(0,gt.Mt)(this.parent.agentIdentifier,"session_replay.inline_stylesheet"),this.shouldFix=this.shouldInlineStylesheets,this.stopRecording=()=>{}}getEvents(){var e;return null!==(e=(0,i.Z)(this,At)[0])&&void 0!==e&&e.events.length?{...(0,i.Z)(this,At)[0],type:"preloaded"}:{events:[...(0,i.Z)(this,bt).events,...(0,i.Z)(this,vt).events].filter((e=>e)),type:"standard",cycleTimestamp:Math.min((0,i.Z)(this,bt).cycleTimestamp,(0,i.Z)(this,vt).cycleTimestamp),payloadBytesEstimation:(0,i.Z)(this,bt).payloadBytesEstimation+(0,i.Z)(this,vt).payloadBytesEstimation,hasError:(0,i.Z)(this,bt).hasError||(0,i.Z)(this,vt).hasError,hasMeta:(0,i.Z)(this,bt).hasMeta||(0,i.Z)(this,vt).hasMeta,hasSnapshot:(0,i.Z)(this,bt).hasSnapshot||(0,i.Z)(this,vt).hasSnapshot,inlinedAllStylesheets:!!(0,i.Z)(this,bt).events.length&&(0,i.Z)(this,bt).inlinedAllStylesheets||(0,i.Z)(this,vt).inlinedAllStylesheets}}clearBuffer(){var e;null!==(e=(0,i.Z)(this,At)[0])&&void 0!==e&&e.events.length?(0,i.Z)(this,At).shift():this.parent.mode===It.IK.ERROR?(0,s.Z)(this,bt,(0,i.Z)(this,vt)):(0,s.Z)(this,bt,new mt),(0,s.Z)(this,vt,new mt)}startRecording(){this.recording=!0;const{block_class:e,ignore_class:t,mask_text_class:n,block_selector:r,mask_input_options:o,mask_text_selector:s,mask_all_inputs:i,inline_stylesheet:a,inline_images:l,collect_fonts:c}=(0,gt.Mt)(this.parent.agentIdentifier,"session_replay"),d=ut({emit:this.audit.bind(this),blockClass:e,ignoreClass:t,maskTextClass:n,blockSelector:r,maskInputOptions:o,maskTextSelector:s,maskAllInputs:i,inlineStylesheet:a,inlineImages:l,collectFonts:c,checkoutEveryNms:pt.u0[this.parent.mode]});this.stopRecording=()=>{this.recording=!1,d()}}audit(e,t){if(!1===this.shouldInlineStylesheets||!this.shouldFix)return this.currentBufferTarget.inlinedAllStylesheets=!1,this.store(e,t);const n=ft.j.evaluate();!n&&(0,i.Z)(this,wt)&&e.type===pt.i9.Meta&&(0,s.Z)(this,wt,!1),n&&((0,Ct.p)(yt.xS,["SessionReplay/Payload/Missing-Inline-Css",n],void 0,St.D.metrics,this.parent.ee),ft.j.fix().then((e=>{e&&(this.currentBufferTarget.inlinedAllStylesheets=!1,this.shouldFix=!1),this.takeFullSnapshot()})),e.type!==pt.i9.FullSnapshot&&e.type!==pt.i9.Meta||(0,s.Z)(this,wt,!0)),(0,i.Z)(this,wt)||this.store(e,t)}store(e,t){if(!e)return;if(e.__serialized=(0,ht.P)(e),!this.parent.scheduler&&(0,i.Z)(this,At).length?this.currentBufferTarget=(0,i.Z)(this,At)[(0,i.Z)(this,At).length-1]:this.currentBufferTarget=(0,i.Z)(this,vt),this.parent.blocked)return;const n=e.__serialized.length,r=this.getPayloadSize(n);this.parent.mode===It.IK.ERROR&&t&&e.type===pt.i9.Meta&&this.clearBuffer(),e.type===pt.i9.Meta&&(this.currentBufferTarget.hasMeta=!0),e.type===pt.i9.FullSnapshot&&(this.currentBufferTarget.hasSnapshot=!0),this.currentBufferTarget.add(e),this.currentBufferTarget.payloadBytesEstimation+=n,r>pt.fm&&this.parent.mode!==It.IK.ERROR&&(this.parent.scheduler?this.parent.scheduler.runHarvest():(0,i.Z)(this,At).push(new mt))}takeFullSnapshot(){ut.takeFullSnapshot()}clearTimestamps(){this.currentBufferTarget.cycleTimestamp=void 0}getPayloadSize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.estimateCompression(this.currentBufferTarget.payloadBytesEstimation+e)+pt.J0}estimateCompression(e){return this.shouldCompress?e*pt.Vb:e}}},4939:(e,t,n)=>{n.d(t,{j:()=>m});var r=n(101),o=n(4572),s=n(2346),i=n(3092),a=n(3889),l=n(6033),c=n(8958),d=n(3980),u=new WeakMap,h=new WeakMap,p=new WeakSet;async function g(e,t){const n=await c.Yu.FETCH.bind(window)(t);if(!n.ok)return void(this.failedToFix=!0);const r=await n.text();try{const t=new CSSStyleSheet;await t.replace(r),Object.defineProperty(e,"cssRules",{get:()=>t.cssRules}),Object.defineProperty(e,"rules",{get:()=>t.rules})}catch(o){Object.defineProperty(e,"cssText",{get:()=>r}),this.failedToFix=!0}}const m=new class{constructor(){(0,r.Z)(this,p),(0,s.Z)(this,u,{writable:!0,value:new WeakSet}),(0,s.Z)(this,h,{writable:!0,value:[]}),(0,o.Z)(this,"invalidStylesheetsDetected",!1),(0,o.Z)(this,"failedToFix",!1)}evaluate(){let e=0;if(d.il)for(let n=0;n<Object.keys(document.styleSheets).length;n++){const r=document.styleSheets[n];if(!(0,l.Z)(this,u).has(r)){(0,l.Z)(this,u).add(r);try{r.cssRules}catch(t){e++,(0,l.Z)(this,h).push((0,a.Z)(this,p,g).call(this,document.styleSheets[n],r.href))}}}return e&&(this.invalidStylesheetsDetected=!0),e}async fix(){await Promise.all((0,l.Z)(this,h)),(0,i.Z)(this,h,[]);const e=this.failedToFix;return this.failedToFix=!1,e}}},3092:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(1519);function o(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,(0,r.Z)(e,t,"set"),n),n}}}]);
//# sourceMappingURL=recorder.0f38adda.chunk.js.map