{"version":3,"file":"static/js/page_view_event-aggregate.34f58569.chunk.js","mappings":"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","sources":["../node_modules/@newrelic/browser-agent/dist/esm/common/timing/nav-timing.js","../node_modules/@newrelic/browser-agent/dist/esm/common/vitals/constants.js","../node_modules/@newrelic/browser-agent/dist/esm/common/vitals/first-contentful-paint.js","../node_modules/@newrelic/browser-agent/dist/esm/common/vitals/first-paint.js","../node_modules/@newrelic/browser-agent/dist/esm/common/vitals/time-to-first-byte.js","../node_modules/@newrelic/browser-agent/dist/esm/common/vitals/vital-metric.js","../node_modules/@newrelic/browser-agent/dist/esm/features/page_view_event/aggregate/initialized-features.js","../node_modules/@newrelic/browser-agent/dist/esm/features/page_view_event/aggregate/index.js","../node_modules/@newrelic/browser-agent/node_modules/web-vitals/dist/web-vitals.js"],"sourcesContent":["/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// We don't use JSON.stringify directly on the performance timing data for these reasons:\n// * Chrome has extra data in the performance object that we don't want to send all the time (wasteful)\n// * Firefox fails to stringify the native object due to - http://code.google.com/p/v8/issues/detail?id=1223\n// * The variable names are long and wasteful to transmit\n\n// Add Performance Timing values to the given object.\n// * Values are written relative to an offset to reduce their length (i.e. number of characters).\n// * The offset is sent with the data\n// * 0's are not included unless the value is a 'relative zero'\n//\n\nvar START = 'Start';\nvar END = 'End';\nvar UNLOAD_EVENT = 'unloadEvent';\nvar REDIRECT = 'redirect';\nvar DOMAIN_LOOKUP = 'domainLookup';\nvar ONNECT = 'onnect';\nvar REQUEST = 'request';\nvar RESPONSE = 'response';\nvar LOAD_EVENT = 'loadEvent';\nvar DOM_CONTENT_LOAD_EVENT = 'domContentLoadedEvent';\nexport var navTimingValues = [];\nfunction getPntType(type) {\n  if (typeof type === 'number') return type;\n  const types = {\n    navigate: undefined,\n    reload: 1,\n    back_forward: 2,\n    prerender: 3\n  };\n  return types[type];\n}\nexport function addPT(offset, pt) {\n  let v = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  let isL1Api = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  if (!pt) return;\n  v.of = offset;\n  handleValue(v.of, v, 'n', true);\n  handleValue(pt[UNLOAD_EVENT + START], v, 'u', isL1Api);\n  handleValue(pt[REDIRECT + START], v, 'r', isL1Api);\n  handleValue(pt[UNLOAD_EVENT + END], v, 'ue', isL1Api);\n  handleValue(pt[REDIRECT + END], v, 're', isL1Api);\n  handleValue(pt['fetch' + START], v, 'f', isL1Api);\n  handleValue(pt[DOMAIN_LOOKUP + START], v, 'dn', isL1Api);\n  handleValue(pt[DOMAIN_LOOKUP + END], v, 'dne', isL1Api);\n  handleValue(pt['c' + ONNECT + START], v, 'c', isL1Api);\n  handleValue(pt['secureC' + ONNECT + 'ion' + START], v, 's', isL1Api);\n  handleValue(pt['c' + ONNECT + END], v, 'ce', isL1Api);\n  handleValue(pt[REQUEST + START], v, 'rq', isL1Api);\n  handleValue(pt[RESPONSE + START], v, 'rp', isL1Api);\n  handleValue(pt[RESPONSE + END], v, 'rpe', isL1Api);\n  handleValue(pt.domLoading, v, 'dl', isL1Api);\n  handleValue(pt.domInteractive, v, 'di', isL1Api);\n  handleValue(pt[DOM_CONTENT_LOAD_EVENT + START], v, 'ds', isL1Api);\n  handleValue(pt[DOM_CONTENT_LOAD_EVENT + END], v, 'de', isL1Api);\n  handleValue(pt.domComplete, v, 'dc', isL1Api);\n  handleValue(pt[LOAD_EVENT + START], v, 'l', isL1Api);\n  handleValue(pt[LOAD_EVENT + END], v, 'le', isL1Api);\n  return v;\n}\n\n// Add Performance Navigation values to the given object\nexport function addPN(pn, v) {\n  handleValue(getPntType(pn.type), v, 'ty');\n  handleValue(pn.redirectCount, v, 'rc');\n  return v;\n}\nfunction handleValue(value, obj, prop, isOldApi) {\n  /*\n  For L2 Timing API, the value will already be a relative-to-previous-document DOMHighResTimeStamp.\n  For L1 (deprecated) Timing, the value is an UNIX epoch timestamp, which we will convert to a relative time using our offset.\n  PNT.type is reported as undefined, 1, 2, etc -- note that zero-value properties will be recorded as 'undefined', however DEM interprets undefined \"types\" as \"navigate\"\n  */\n  if (typeof value === 'number' && value > 0) {\n    // note that zero-value properties will be recorded as 'undefined'\n    if (isOldApi) {\n      const offset = obj?.of > 0 ? obj.of : 0; // expect an epoch timestamp, if called by addPT\n      value = Math.max(value - offset, 0);\n    }\n    value = Math.round(value);\n    obj[prop] = value;\n  }\n  navTimingValues.push(value);\n}","export const VITAL_NAMES = {\n  FIRST_PAINT: 'fp',\n  FIRST_CONTENTFUL_PAINT: 'fcp',\n  FIRST_INPUT_DELAY: 'fi',\n  LARGEST_CONTENTFUL_PAINT: 'lcp',\n  CUMULATIVE_LAYOUT_SHIFT: 'cls',\n  INTERACTION_TO_NEXT_PAINT: 'inp',\n  LONG_TASK: 'lt',\n  TIME_TO_FIRST_BYTE: 'ttfb'\n};","import { onFCP } from 'web-vitals';\n// eslint-disable-next-line camelcase\nimport { iOSBelow16, initiallyHidden, isBrowserScope } from '../constants/runtime';\nimport { VITAL_NAMES } from './constants';\nimport { VitalMetric } from './vital-metric';\nexport const firstContentfulPaint = new VitalMetric(VITAL_NAMES.FIRST_CONTENTFUL_PAINT);\n\n/* First Contentful Paint - As of WV v3, it still imperfectly tries to detect document vis state asap and isn't supposed to report if page starts hidden. */\nif (isBrowserScope) {\n  // eslint-disable-next-line camelcase\n  if (iOSBelow16) {\n    try {\n      if (!initiallyHidden) {\n        // see ios-version.js for detail on this following bug case; tldr: buffered flag doesn't work but getEntriesByType does\n        const paintEntries = performance.getEntriesByType('paint');\n        paintEntries.forEach(entry => {\n          if (entry.name === 'first-contentful-paint') {\n            firstContentfulPaint.update({\n              value: Math.floor(entry.startTime),\n              entries: paintEntries\n            });\n          }\n        });\n      }\n    } catch (e) {\n      // ignore\n    }\n  } else {\n    onFCP(_ref => {\n      let {\n        value,\n        entries\n      } = _ref;\n      if (initiallyHidden || firstContentfulPaint.isValid) return;\n      firstContentfulPaint.update({\n        value,\n        entries\n      });\n    });\n  }\n}","import { initiallyHidden, isBrowserScope } from '../constants/runtime';\nimport { VITAL_NAMES } from './constants';\nimport { VitalMetric } from './vital-metric';\nexport const firstPaint = new VitalMetric(VITAL_NAMES.FIRST_PAINT);\nif (isBrowserScope) {\n  const handleEntries = entries => {\n    entries.forEach(entry => {\n      if (entry.name === 'first-paint' && !firstPaint.isValid) {\n        observer.disconnect();\n\n        /* Initial hidden state and pre-rendering not yet considered for first paint. See web-vitals onFCP for example. */\n        firstPaint.update({\n          value: entry.startTime,\n          entries\n        });\n      }\n    });\n  };\n  let observer;\n  try {\n    if (PerformanceObserver.supportedEntryTypes.includes('paint') && !initiallyHidden) {\n      observer = new PerformanceObserver(list => {\n        // Delay by a microtask to workaround a bug in Safari where the\n        // callback is invoked immediately, rather than in a separate task.\n        // See: https://github.com/GoogleChrome/web-vitals/issues/277\n        Promise.resolve().then(() => {\n          handleEntries(list.getEntries());\n        });\n      });\n      observer.observe({\n        type: 'paint',\n        buffered: true\n      });\n    }\n  } catch (e) {\n    // Do nothing.\n  }\n}","import { globalScope, isBrowserScope, isiOS, offset } from '../constants/runtime';\nimport { VITAL_NAMES } from './constants';\nimport { VitalMetric } from './vital-metric';\nimport { onTTFB } from 'web-vitals';\nexport const timeToFirstByte = new VitalMetric(VITAL_NAMES.TIME_TO_FIRST_BYTE);\nif (isBrowserScope && typeof PerformanceNavigationTiming !== 'undefined' && !isiOS) {\n  onTTFB(_ref => {\n    let {\n      value,\n      entries\n    } = _ref;\n    if (!timeToFirstByte.isValid) timeToFirstByte.update({\n      value,\n      entries\n    });\n  });\n} else {\n  if (!timeToFirstByte.isValid) {\n    const entry = {};\n    // convert real timestamps to relative timestamps to match web-vitals behavior\n    for (let key in globalScope?.performance?.timing || {}) entry[key] = Math.max(globalScope?.performance?.timing[key] - offset, 0);\n\n    // ttfb is equiv to document's responseStart property in timing API --> https://developer.mozilla.org/en-US/docs/Web/API/PerformanceTiming/responseStart\n    timeToFirstByte.update({\n      value: entry.responseStart,\n      entries: [entry]\n    });\n  }\n}","export class VitalMetric {\n  #subscribers = new Set();\n  history = [];\n  constructor(name, roundingMethod) {\n    this.name = name;\n    this.attrs = {};\n    this.roundingMethod = typeof roundingMethod === 'function' ? roundingMethod : Math.floor;\n  }\n  update(_ref) {\n    let {\n      value,\n      entries = [],\n      attrs = {}\n    } = _ref;\n    if (value < 0) return;\n    const state = {\n      value: this.roundingMethod(value),\n      name: this.name,\n      entries,\n      attrs\n    };\n    this.history.push(state);\n    this.#subscribers.forEach(cb => {\n      try {\n        cb(this.current);\n      } catch (e) {\n        // ignore errors\n      }\n    });\n  }\n  get current() {\n    return this.history[this.history.length - 1] || {\n      value: undefined,\n      name: this.name,\n      entries: [],\n      attrs: {}\n    };\n  }\n  get isValid() {\n    return this.current.value >= 0;\n  }\n  subscribe(callback) {\n    let buffered = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    if (typeof callback !== 'function') return;\n    this.#subscribers.add(callback);\n    // emit full history on subscription (\"buffered\" behavior)\n    if (this.isValid && !!buffered) this.history.forEach(state => {\n      callback(state);\n    });\n    return () => {\n      this.#subscribers.delete(callback);\n    };\n  }\n}","import { FEATURE_NAMES } from '../../../loaders/features/features';\nimport { gosNREUM } from '../../../common/window/nreum';\n\n/**\n * Get an array of flags required by downstream (NR UI) based on the features initialized in this agent\n * (aka what is running on the page).\n * @param {String} agentId - the ID of the initialized agent on the page, mapping to the one under the global 'newrelic' object\n * @returns {String[]} Up to 5 short strings corresponding to ingest mapping of features.\n */\nexport function getActivatedFeaturesFlags(agentId) {\n  const flagArr = [];\n  const newrelic = gosNREUM();\n  try {\n    Object.keys(newrelic.initializedAgents[agentId].features).forEach(featName => {\n      switch (featName) {\n        case FEATURE_NAMES.ajax:\n          flagArr.push('xhr');\n          break;\n        case FEATURE_NAMES.jserrors:\n          flagArr.push('err');\n          break;\n        case FEATURE_NAMES.pageAction:\n          flagArr.push('ins');\n          break;\n        case FEATURE_NAMES.sessionTrace:\n          flagArr.push('stn');\n          break;\n        case FEATURE_NAMES.spa:\n          flagArr.push('spa');\n          break;\n      }\n    });\n  } catch (e) {}\n  return flagArr;\n}\n\n// Note: this module and the \"af\" param in src/features/page_view_event/aggregate/index.js can be removed in the future at such time\n// that it's no longer being used. For the browser agent, this is an unused flag system.","import { globalScope, isBrowserScope } from '../../../common/constants/runtime';\nimport { addPT, addPN } from '../../../common/timing/nav-timing';\nimport { stringify } from '../../../common/util/stringify';\nimport { getInfo, getRuntime } from '../../../common/config/config';\nimport { Harvest } from '../../../common/harvest/harvest';\nimport * as CONSTANTS from '../constants';\nimport { getActivatedFeaturesFlags } from './initialized-features';\nimport { activateFeatures } from '../../../common/util/feature-flags';\nimport { warn } from '../../../common/util/console';\nimport { AggregateBase } from '../../utils/aggregate-base';\nimport { firstContentfulPaint } from '../../../common/vitals/first-contentful-paint';\nimport { firstPaint } from '../../../common/vitals/first-paint';\nimport { timeToFirstByte } from '../../../common/vitals/time-to-first-byte';\nexport class Aggregate extends AggregateBase {\n  static featureName = CONSTANTS.FEATURE_NAME;\n  constructor(agentIdentifier, aggregator) {\n    super(agentIdentifier, aggregator, CONSTANTS.FEATURE_NAME);\n    this.timeToFirstByte = 0;\n    this.firstByteToWindowLoad = 0; // our \"frontend\" duration\n    this.firstByteToDomContent = 0; // our \"dom processing\" duration\n\n    if (isBrowserScope) {\n      timeToFirstByte.subscribe(_ref => {\n        let {\n          value,\n          entries\n        } = _ref;\n        const navEntry = entries[0];\n        this.timeToFirstByte = Math.max(value, this.timeToFirstByte);\n        this.firstByteToWindowLoad = Math.max(Math.round(navEntry.loadEventEnd - this.timeToFirstByte), this.firstByteToWindowLoad); // our \"frontend\" duration\n        this.firstByteToDomContent = Math.max(Math.round(navEntry.domContentLoadedEventEnd - this.timeToFirstByte), this.firstByteToDomContent); // our \"dom processing\" duration\n\n        this.sendRum();\n      });\n    } else {\n      // worker agent build does not get TTFB values, use default 0 values\n      this.sendRum();\n    }\n  }\n  sendRum() {\n    const info = getInfo(this.agentIdentifier);\n    const agentRuntime = getRuntime(this.agentIdentifier);\n    const harvester = new Harvest(this);\n    if (!info.beacon) return;\n    if (info.queueTime) this.aggregator.store('measures', 'qt', {\n      value: info.queueTime\n    });\n    if (info.applicationTime) this.aggregator.store('measures', 'ap', {\n      value: info.applicationTime\n    });\n\n    // These 3 values should've been recorded after load and before this func runs. They are part of the minimum required for PageView events to be created.\n    // Following PR #428, which demands that all agents send RUM call, these need to be sent even outside of the main window context where PerformanceTiming\n    // or PerformanceNavigationTiming do not exists. Hence, they'll be filled in by 0s instead in, for example, worker threads that still init the PVE module.\n    this.aggregator.store('measures', 'be', {\n      value: this.timeToFirstByte\n    });\n    this.aggregator.store('measures', 'fe', {\n      value: this.firstByteToWindowLoad\n    });\n    this.aggregator.store('measures', 'dc', {\n      value: this.firstByteToDomContent\n    });\n    const queryParameters = {\n      tt: info.ttGuid,\n      us: info.user,\n      ac: info.account,\n      pr: info.product,\n      af: getActivatedFeaturesFlags(this.agentIdentifier).join(','),\n      ...Object.entries(this.aggregator.get('measures') || {}).reduce((aggregator, _ref2) => {\n        let [metricName, measure] = _ref2;\n        aggregator[metricName] = measure.params?.value;\n        return aggregator;\n      }, {}),\n      xx: info.extra,\n      ua: info.userAttributes,\n      at: info.atts\n    };\n    if (agentRuntime.session) queryParameters.fsh = Number(agentRuntime.session.isNew); // \"first session harvest\" aka RUM request or PageView event of a session\n\n    let body;\n    if (typeof info.jsAttributes === 'object' && Object.keys(info.jsAttributes).length > 0) {\n      body = {\n        ja: info.jsAttributes\n      };\n    }\n    if (globalScope.performance) {\n      if (typeof PerformanceNavigationTiming !== 'undefined') {\n        // Navigation Timing level 2 API that replaced PerformanceTiming & PerformanceNavigation\n        const navTimingEntry = globalScope?.performance?.getEntriesByType('navigation')?.[0];\n        const perf = {\n          timing: addPT(agentRuntime.offset, navTimingEntry, {}),\n          navigation: addPN(navTimingEntry, {})\n        };\n        queryParameters.perf = stringify(perf);\n      } else if (typeof PerformanceTiming !== 'undefined') {\n        // Safari pre-15 did not support level 2 timing\n        const perf = {\n          timing: addPT(agentRuntime.offset, globalScope.performance.timing, {}, true),\n          navigation: addPN(globalScope.performance.navigation, {})\n        };\n        queryParameters.perf = stringify(perf);\n      }\n    }\n    queryParameters.fp = firstPaint.current.value;\n    queryParameters.fcp = firstContentfulPaint.current.value;\n    harvester.send({\n      endpoint: 'rum',\n      payload: {\n        qs: queryParameters,\n        body\n      },\n      opts: {\n        needResponse: true,\n        sendEmptyBody: true\n      },\n      cbFinished: _ref3 => {\n        let {\n          status,\n          responseText\n        } = _ref3;\n        if (status >= 400) {\n          // Adding retry logic for the rum call will be a separate change\n          this.ee.abort();\n          return;\n        }\n        try {\n          activateFeatures(JSON.parse(responseText), this.agentIdentifier);\n          this.drain();\n        } catch (err) {\n          this.ee.abort();\n          warn('RUM call failed. Agent shutting down.');\n        }\n      }\n    });\n  }\n}","var e,n,t,i,r,a=-1,o=function(e){addEventListener(\"pageshow\",(function(n){n.persisted&&(a=n.timeStamp,e(n))}),!0)},c=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType(\"navigation\")[0]},u=function(){var e=c();return e&&e.activationStart||0},f=function(e,n){var t=c(),i=\"navigate\";a>=0?i=\"back-forward-cache\":t&&(document.prerendering||u()>0?i=\"prerender\":document.wasDiscarded?i=\"restore\":t.type&&(i=t.type.replace(/_/g,\"-\")));return{name:e,value:void 0===n?-1:n,rating:\"good\",delta:0,entries:[],id:\"v3-\".concat(Date.now(),\"-\").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},s=function(e,n,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver((function(e){Promise.resolve().then((function(){n(e.getEntries())}))}));return i.observe(Object.assign({type:e,buffered:!0},t||{})),i}}catch(e){}},d=function(e,n,t,i){var r,a;return function(o){n.value>=0&&(o||i)&&((a=n.value-(r||0))||void 0===r)&&(r=n.value,n.delta=a,n.rating=function(e,n){return e>n[1]?\"poor\":e>n[0]?\"needs-improvement\":\"good\"}(n.value,t),e(n))}},l=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},p=function(e){var n=function(n){\"pagehide\"!==n.type&&\"hidden\"!==document.visibilityState||e(n)};addEventListener(\"visibilitychange\",n,!0),addEventListener(\"pagehide\",n,!0)},v=function(e){var n=!1;return function(t){n||(e(t),n=!0)}},m=-1,h=function(){return\"hidden\"!==document.visibilityState||document.prerendering?1/0:0},g=function(e){\"hidden\"===document.visibilityState&&m>-1&&(m=\"visibilitychange\"===e.type?e.timeStamp:0,T())},y=function(){addEventListener(\"visibilitychange\",g,!0),addEventListener(\"prerenderingchange\",g,!0)},T=function(){removeEventListener(\"visibilitychange\",g,!0),removeEventListener(\"prerenderingchange\",g,!0)},E=function(){return m<0&&(m=h(),y(),o((function(){setTimeout((function(){m=h(),y()}),0)}))),{get firstHiddenTime(){return m}}},C=function(e){document.prerendering?addEventListener(\"prerenderingchange\",(function(){return e()}),!0):e()},L=[1800,3e3],w=function(e,n){n=n||{},C((function(){var t,i=E(),r=f(\"FCP\"),a=s(\"paint\",(function(e){e.forEach((function(e){\"first-contentful-paint\"===e.name&&(a.disconnect(),e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-u(),0),r.entries.push(e),t(!0)))}))}));a&&(t=d(e,r,L,n.reportAllChanges),o((function(i){r=f(\"FCP\"),t=d(e,r,L,n.reportAllChanges),l((function(){r.value=performance.now()-i.timeStamp,t(!0)}))})))}))},b=[.1,.25],S=function(e,n){n=n||{},w(v((function(){var t,i=f(\"CLS\",0),r=0,a=[],c=function(e){e.forEach((function(e){if(!e.hadRecentInput){var n=a[0],t=a[a.length-1];r&&e.startTime-t.startTime<1e3&&e.startTime-n.startTime<5e3?(r+=e.value,a.push(e)):(r=e.value,a=[e])}})),r>i.value&&(i.value=r,i.entries=a,t())},u=s(\"layout-shift\",c);u&&(t=d(e,i,b,n.reportAllChanges),p((function(){c(u.takeRecords()),t(!0)})),o((function(){r=0,i=f(\"CLS\",0),t=d(e,i,b,n.reportAllChanges),l((function(){return t()}))})),setTimeout(t,0))})))},A={passive:!0,capture:!0},I=new Date,P=function(i,r){e||(e=r,n=i,t=new Date,k(removeEventListener),F())},F=function(){if(n>=0&&n<t-I){var r={entryType:\"first-input\",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+n};i.forEach((function(e){e(r)})),i=[]}},M=function(e){if(e.cancelable){var n=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;\"pointerdown\"==e.type?function(e,n){var t=function(){P(e,n),r()},i=function(){r()},r=function(){removeEventListener(\"pointerup\",t,A),removeEventListener(\"pointercancel\",i,A)};addEventListener(\"pointerup\",t,A),addEventListener(\"pointercancel\",i,A)}(n,e):P(n,e)}},k=function(e){[\"mousedown\",\"keydown\",\"touchstart\",\"pointerdown\"].forEach((function(n){return e(n,M,A)}))},D=[100,300],x=function(t,r){r=r||{},C((function(){var a,c=E(),u=f(\"FID\"),l=function(e){e.startTime<c.firstHiddenTime&&(u.value=e.processingStart-e.startTime,u.entries.push(e),a(!0))},m=function(e){e.forEach(l)},h=s(\"first-input\",m);a=d(t,u,D,r.reportAllChanges),h&&p(v((function(){m(h.takeRecords()),h.disconnect()}))),h&&o((function(){var o;u=f(\"FID\"),a=d(t,u,D,r.reportAllChanges),i=[],n=-1,e=null,k(addEventListener),o=l,i.push(o),F()}))}))},B=0,R=1/0,H=0,N=function(e){e.forEach((function(e){e.interactionId&&(R=Math.min(R,e.interactionId),H=Math.max(H,e.interactionId),B=H?(H-R)/7+1:0)}))},O=function(){return r?B:performance.interactionCount||0},q=function(){\"interactionCount\"in performance||r||(r=s(\"event\",N,{type:\"event\",buffered:!0,durationThreshold:0}))},j=[200,500],_=0,z=function(){return O()-_},G=[],J={},K=function(e){var n=G[G.length-1],t=J[e.interactionId];if(t||G.length<10||e.duration>n.latency){if(t)t.entries.push(e),t.latency=Math.max(t.latency,e.duration);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};J[i.id]=i,G.push(i)}G.sort((function(e,n){return n.latency-e.latency})),G.splice(10).forEach((function(e){delete J[e.id]}))}},Q=function(e,n){n=n||{},C((function(){var t;q();var i,r=f(\"INP\"),a=function(e){e.forEach((function(e){(e.interactionId&&K(e),\"first-input\"===e.entryType)&&(!G.some((function(n){return n.entries.some((function(n){return e.duration===n.duration&&e.startTime===n.startTime}))}))&&K(e))}));var n,t=(n=Math.min(G.length-1,Math.floor(z()/50)),G[n]);t&&t.latency!==r.value&&(r.value=t.latency,r.entries=t.entries,i())},c=s(\"event\",a,{durationThreshold:null!==(t=n.durationThreshold)&&void 0!==t?t:40});i=d(e,r,j,n.reportAllChanges),c&&(\"PerformanceEventTiming\"in window&&\"interactionId\"in PerformanceEventTiming.prototype&&c.observe({type:\"first-input\",buffered:!0}),p((function(){a(c.takeRecords()),r.value<0&&z()>0&&(r.value=0,r.entries=[]),i(!0)})),o((function(){G=[],_=O(),r=f(\"INP\"),i=d(e,r,j,n.reportAllChanges)})))}))},U=[2500,4e3],V={},W=function(e,n){n=n||{},C((function(){var t,i=E(),r=f(\"LCP\"),a=function(e){var n=e[e.length-1];n&&n.startTime<i.firstHiddenTime&&(r.value=Math.max(n.startTime-u(),0),r.entries=[n],t())},c=s(\"largest-contentful-paint\",a);if(c){t=d(e,r,U,n.reportAllChanges);var m=v((function(){V[r.id]||(a(c.takeRecords()),c.disconnect(),V[r.id]=!0,t(!0))}));[\"keydown\",\"click\"].forEach((function(e){addEventListener(e,(function(){return setTimeout(m,0)}),!0)})),p(m),o((function(i){r=f(\"LCP\"),t=d(e,r,U,n.reportAllChanges),l((function(){r.value=performance.now()-i.timeStamp,V[r.id]=!0,t(!0)}))}))}}))},X=[800,1800],Y=function e(n){document.prerendering?C((function(){return e(n)})):\"complete\"!==document.readyState?addEventListener(\"load\",(function(){return e(n)}),!0):setTimeout(n,0)},Z=function(e,n){n=n||{};var t=f(\"TTFB\"),i=d(e,t,X,n.reportAllChanges);Y((function(){var r=c();if(r){var a=r.responseStart;if(a<=0||a>performance.now())return;t.value=Math.max(a-u(),0),t.entries=[r],i(!0),o((function(){t=f(\"TTFB\",0),(i=d(e,t,X,n.reportAllChanges))(!0)}))}}))};export{b as CLSThresholds,L as FCPThresholds,D as FIDThresholds,j as INPThresholds,U as LCPThresholds,X as TTFBThresholds,S as getCLS,w as getFCP,x as getFID,Q as getINP,W as getLCP,Z as getTTFB,S as onCLS,w as onFCP,x as onFID,Q as onINP,W as onLCP,Z as onTTFB};\n"],"names":["START","END","UNLOAD_EVENT","REDIRECT","DOMAIN_LOOKUP","ONNECT","REQUEST","RESPONSE","LOAD_EVENT","DOM_CONTENT_LOAD_EVENT","navTimingValues","addPT","offset","pt","v","arguments","length","undefined","isL1Api","of","handleValue","domLoading","domInteractive","domComplete","addPN","pn","type","navigate","reload","back_forward","prerender","redirectCount","value","obj","prop","isOldApi","Math","max","round","push","VITAL_NAMES","FIRST_PAINT","FIRST_CONTENTFUL_PAINT","FIRST_INPUT_DELAY","LARGEST_CONTENTFUL_PAINT","CUMULATIVE_LAYOUT_SHIFT","INTERACTION_TO_NEXT_PAINT","LONG_TASK","TIME_TO_FIRST_BYTE","firstContentfulPaint","VitalMetric","isBrowserScope","iOSBelow16","initiallyHidden","paintEntries","performance","getEntriesByType","forEach","entry","name","update","floor","startTime","entries","e","onFCP","_ref","isValid","firstPaint","handleEntries","observer","disconnect","PerformanceObserver","supportedEntryTypes","includes","list","Promise","resolve","then","getEntries","observe","buffered","timeToFirstByte","PerformanceNavigationTiming","isiOS","onTTFB","key","globalScope","_globalScope$performa","timing","_globalScope$performa2","responseStart","constructor","roundingMethod","_classPrivateFieldInitSpec","_subscribers","writable","Set","_defineProperty","this","attrs","state","history","_classPrivateFieldGet","cb","current","subscribe","callback","add","delete","getActivatedFeaturesFlags","agentId","flagArr","newrelic","gosNREUM","Object","keys","initializedAgents","features","featName","FEATURE_NAMES","ajax","jserrors","pageAction","sessionTrace","spa","Aggregate","AggregateBase","agentIdentifier","aggregator","super","CONSTANTS","firstByteToWindowLoad","firstByteToDomContent","navEntry","loadEventEnd","domContentLoadedEventEnd","sendRum","info","getInfo","agentRuntime","getRuntime","harvester","Harvest","beacon","queueTime","store","applicationTime","queryParameters","tt","ttGuid","us","user","ac","account","pr","product","af","join","get","reduce","_ref2","_measure$params","metricName","measure","params","xx","extra","ua","userAttributes","at","atts","body","session","fsh","Number","isNew","jsAttributes","ja","navTimingEntry","perf","navigation","stringify","PerformanceTiming","fp","fcp","send","endpoint","payload","qs","opts","needResponse","sendEmptyBody","cbFinished","_ref3","status","responseText","ee","abort","activateFeatures","JSON","parse","drain","err","warn","n","t","i","r","a","o","addEventListener","persisted","timeStamp","c","window","u","activationStart","f","document","prerendering","wasDiscarded","replace","rating","delta","id","concat","Date","now","random","navigationType","s","assign","d","l","requestAnimationFrame","p","visibilityState","m","h","g","T","y","removeEventListener","E","setTimeout","firstHiddenTime","C","L","w","reportAllChanges","b","S","hadRecentInput","takeRecords","A","passive","capture","I","P","k","F","entryType","target","cancelable","processingStart","M","D","x","B","R","H","N","interactionId","min","O","interactionCount","q","durationThreshold","j","_","z","G","J","K","duration","latency","sort","splice","Q","some","PerformanceEventTiming","prototype","U","V","W","X","Y","readyState","Z"],"sourceRoot":""}